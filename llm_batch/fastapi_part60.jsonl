{"custom_id": "fastapi#f92f87d379cc5d3c9b3c159d74639411617cb0da", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 4 | Lines Deleted: 12 | Files Changed: 4 | Hunks: 8 | Methods Changed: 4 | Complexity Δ (Sum/Max): 0/0 | Churn Δ: 16 | Churn Cumulative: 317 | Contributors (this commit): 4 | Commits (past 90d): 4 | Contributors (cumulative): 9 | DMM Complexity: 0.0\n\nDIFF:\n@@ -4,7 +4,6 @@ from typing import Optional\n from fastapi import FastAPI, Security\n from fastapi.security import HTTPBasic, HTTPBasicCredentials\n from fastapi.testclient import TestClient\n-from requests.auth import HTTPBasicAuth\n \n app = FastAPI()\n \n@@ -51,8 +50,7 @@ def test_openapi_schema():\n \n \n def test_security_http_basic():\n-    auth = HTTPBasicAuth(username=\"john\", password=\"secret\")\n-    response = client.get(\"/users/me\", auth=auth)\n+    response = client.get(\"/users/me\", auth=(\"john\", \"secret\"))\n     assert response.status_code == 200, response.text\n     assert response.json() == {\"username\": \"john\", \"password\": \"secret\"}\n \n\n@@ -3,7 +3,6 @@ from base64 import b64encode\n from fastapi import FastAPI, Security\n from fastapi.security import HTTPBasic, HTTPBasicCredentials\n from fastapi.testclient import TestClient\n-from requests.auth import HTTPBasicAuth\n \n app = FastAPI()\n \n@@ -48,8 +47,7 @@ def test_openapi_schema():\n \n \n def test_security_http_basic():\n-    auth = HTTPBasicAuth(username=\"john\", password=\"secret\")\n-    response = client.get(\"/users/me\", auth=auth)\n+    response = client.get(\"/users/me\", auth=(\"john\", \"secret\"))\n     assert response.status_code == 200, response.text\n     assert response.json() == {\"username\": \"john\", \"password\": \"secret\"}\n \n\n@@ -3,7 +3,6 @@ from base64 import b64encode\n from fastapi import FastAPI, Security\n from fastapi.security import HTTPBasic, HTTPBasicCredentials\n from fastapi.testclient import TestClient\n-from requests.auth import HTTPBasicAuth\n \n app = FastAPI()\n \n@@ -54,8 +53,7 @@ def test_openapi_schema():\n \n \n def test_security_http_basic():\n-    auth = HTTPBasicAuth(username=\"john\", password=\"secret\")\n-    response = client.get(\"/users/me\", auth=auth)\n+    response = client.get(\"/users/me\", auth=(\"john\", \"secret\"))\n     assert response.status_code == 200, response.text\n     assert response.json() == {\"username\": \"john\", \"password\": \"secret\"}\n \n\n@@ -1,7 +1,6 @@\n from base64 import b64encode\n \n from fastapi.testclient import TestClient\n-from requests.auth import HTTPBasicAuth\n \n from docs_src.security.tutorial006 import app\n \n@@ -38,8 +37,7 @@ def test_openapi_schema():\n \n \n def test_security_http_basic():\n-    auth = HTTPBasicAuth(username=\"john\", password=\"secret\")\n-    response = client.get(\"/users/me\", auth=auth)\n+    response = client.get(\"/users/me\", auth=(\"john\", \"secret\"))\n     assert response.status_code == 200, response.text\n     assert response.json() == {\"username\": \"john\", \"password\": \"secret\"}\n \n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "fastapi#d537ee93d707d392d75ffbe7ff08e4ff70b75729", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 12 | Lines Deleted: 2 | Files Changed: 3 | Hunks: 4 | Methods Changed: 1 | Complexity Δ (Sum/Max): 0/0 | Churn Δ: 14 | Churn Cumulative: 541 | Contributors (this commit): 9 | Commits (past 90d): 13 | Contributors (cumulative): 11 | DMM Complexity: None\n\nDIFF:\n@@ -1,6 +1,14 @@\n from typing import Union\n \n-from fastapi import Cookie, Depends, FastAPI, Query, WebSocket, status\n+from fastapi import (\n+    Cookie,\n+    Depends,\n+    FastAPI,\n+    Query,\n+    WebSocket,\n+    WebSocketException,\n+    status,\n+)\n from fastapi.responses import HTMLResponse\n \n app = FastAPI()\n@@ -61,7 +69,7 @@ async def get_cookie_or_token(\n     token: Union[str, None] = Query(default=None),\n ):\n     if session is None and token is None:\n-        await websocket.close(code=status.WS_1008_POLICY_VIOLATION)\n+        raise WebSocketException(code=status.WS_1008_POLICY_VIOLATION)\n     return session or token\n \n \n\n@@ -8,6 +8,7 @@ from .applications import FastAPI as FastAPI\n from .background import BackgroundTasks as BackgroundTasks\n from .datastructures import UploadFile as UploadFile\n from .exceptions import HTTPException as HTTPException\n+from .exceptions import WebSocketException as WebSocketException\n from .param_functions import Body as Body\n from .param_functions import Cookie as Cookie\n from .param_functions import Depends as Depends\n\n@@ -3,6 +3,7 @@ from typing import Any, Dict, Optional, Sequence, Type\n from pydantic import BaseModel, ValidationError, create_model\n from pydantic.error_wrappers import ErrorList\n from starlette.exceptions import HTTPException as StarletteHTTPException\n+from starlette.exceptions import WebSocketException as WebSocketException  # noqa: F401\n \n \n class HTTPException(StarletteHTTPException):\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "fastapi#fa74093440aaff710009ed23646eb804417b26fc", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 16 | Lines Deleted: 16 | Files Changed: 8 | Hunks: 14 | Methods Changed: 12 | Complexity Δ (Sum/Max): 0/0 | Churn Δ: 32 | Churn Cumulative: 7952 | Contributors (this commit): 58 | Commits (past 90d): 23 | Contributors (cumulative): 79 | DMM Complexity: None\n\nDIFF:\n@@ -107,7 +107,7 @@ async def get_current_user(\n     if security_scopes.scopes:\n         authenticate_value = f'Bearer scope=\"{security_scopes.scope_str}\"'\n     else:\n-        authenticate_value = f\"Bearer\"\n+        authenticate_value = \"Bearer\"\n     credentials_exception = HTTPException(\n         status_code=status.HTTP_401_UNAUTHORIZED,\n         detail=\"Could not validate credentials\",\n\n@@ -106,7 +106,7 @@ async def get_current_user(\n     if security_scopes.scopes:\n         authenticate_value = f'Bearer scope=\"{security_scopes.scope_str}\"'\n     else:\n-        authenticate_value = f\"Bearer\"\n+        authenticate_value = \"Bearer\"\n     credentials_exception = HTTPException(\n         status_code=status.HTTP_401_UNAUTHORIZED,\n         detail=\"Could not validate credentials\",\n\n@@ -107,7 +107,7 @@ async def get_current_user(\n     if security_scopes.scopes:\n         authenticate_value = f'Bearer scope=\"{security_scopes.scope_str}\"'\n     else:\n-        authenticate_value = f\"Bearer\"\n+        authenticate_value = \"Bearer\"\n     credentials_exception = HTTPException(\n         status_code=status.HTTP_401_UNAUTHORIZED,\n         detail=\"Could not validate credentials\",\n\n@@ -426,21 +426,21 @@ def is_coroutine_callable(call: Callable[..., Any]) -> bool:\n         return inspect.iscoroutinefunction(call)\n     if inspect.isclass(call):\n         return False\n-    dunder_call = getattr(call, \"__call__\", None)\n+    dunder_call = getattr(call, \"__call__\", None)  # noqa: B004\n     return inspect.iscoroutinefunction(dunder_call)\n \n \n def is_async_gen_callable(call: Callable[..., Any]) -> bool:\n     if inspect.isasyncgenfunction(call):\n         return True\n-    dunder_call = getattr(call, \"__call__\", None)\n+    dunder_call = getattr(call, \"__call__\", None)  # noqa: B004\n     return inspect.isasyncgenfunction(dunder_call)\n \n \n def is_gen_callable(call: Callable[..., Any]) -> bool:\n     if inspect.isgeneratorfunction(call):\n         return True\n-    dunder_call = getattr(call, \"__call__\", None)\n+    dunder_call = getattr(call, \"__call__\", None)  # noqa: B004\n     return inspect.isgeneratorfunction(dunder_call)\n \n \n@@ -724,14 +724,14 @@ def get_body_field(*, dependant: Dependant, name: str) -> Optional[ModelField]:\n     # in case a sub-dependency is evaluated with a single unique body field\n     # That is combined (embedded) with other body fields\n     for param in flat_dependant.body_params:\n-        setattr(param.field_info, \"embed\", True)\n+        setattr(param.field_info, \"embed\", True)  # noqa: B010\n     model_name = \"Body_\" + name\n     BodyModel: Type[BaseModel] = create_model(model_name)\n     for f in flat_dependant.body_params:\n         BodyModel.__fields__[f.name] = f\n     required = any(True for f in flat_dependant.body_params if f.required)\n \n-    BodyFieldInfo_kwargs: Dict[str, Any] = dict(default=None)\n+    BodyFieldInfo_kwargs: Dict[str, Any] = {\"default\": None}\n     if any(isinstance(f.field_info, params.File) for f in flat_dependant.body_params):\n         BodyFieldInfo: Type[params.Body] = params.File\n     elif any(isinstance(f.field_info, params.Form) for f in flat_dependant.body_params):\n@@ -740,7 +740,7 @@ def get_body_field(*, dependant: Dependant, name: str) -> Optional[ModelField]:\n         BodyFieldInfo = params.Body\n \n         body_param_media_types = [\n-            getattr(f.field_info, \"media_type\")\n+            f.field_info.media_type\n             for f in flat_dependant.body_params\n             if isinstance(f.field_info, params.Body)\n         ]\n\n@@ -701,7 +701,7 @@ class APIRouter(routing.Router):\n             ), \"A path prefix must not end with '/', as the routes will start with '/'\"\n         else:\n             for r in router.routes:\n-                path = getattr(r, \"path\")\n+                path = getattr(r, \"path\")  # noqa: B009\n                 name = getattr(r, \"name\", \"unknown\")\n                 if path is not None and not path:\n                     raise Exception(\n\n@@ -332,7 +332,7 @@ def serve():\n     os.chdir(\"site\")\n     server_address = (\"\", 8008)\n     server = HTTPServer(server_address, SimpleHTTPRequestHandler)\n-    typer.echo(f\"Serving at: http://127.0.0.1:8008\")\n+    typer.echo(\"Serving at: http://127.0.0.1:8008\")\n     server.serve_forever()\n \n \n@@ -420,7 +420,7 @@ def get_file_to_nav_map(nav: list) -> Dict[str, Tuple[str, ...]]:\n     file_to_nav = {}\n     for item in nav:\n         if type(item) is str:\n-            file_to_nav[item] = tuple()\n+            file_to_nav[item] = ()\n         elif type(item) is dict:\n             item_key = list(item.keys())[0]\n             sub_nav = item[item_key]\n\n@@ -110,6 +110,6 @@ def test_route_classes():\n     for r in app.router.routes:\n         assert isinstance(r, Route)\n         routes[r.path] = r\n-    assert getattr(routes[\"/a/\"], \"x_type\") == \"A\"\n-    assert getattr(routes[\"/a/b/\"], \"x_type\") == \"B\"\n-    assert getattr(routes[\"/a/b/c/\"], \"x_type\") == \"C\"\n+    assert getattr(routes[\"/a/\"], \"x_type\") == \"A\"  # noqa: B009\n+    assert getattr(routes[\"/a/b/\"], \"x_type\") == \"B\"  # noqa: B009\n+    assert getattr(routes[\"/a/b/c/\"], \"x_type\") == \"C\"  # noqa: B009\n\n@@ -111,7 +111,7 @@ def test_router_ws_depends():\n \n def test_router_ws_depends_with_override():\n     client = TestClient(app)\n-    app.dependency_overrides[ws_dependency] = lambda: \"Override\"\n+    app.dependency_overrides[ws_dependency] = lambda: \"Override\"  # noqa: E731\n     with client.websocket_connect(\"/router-ws-depends/\") as websocket:\n         assert websocket.receive_text() == \"Override\"\n \n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "fastapi#63a5ffcf577abc6015d021f65857b3826d8db74e", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 1 | Lines Deleted: 1 | Files Changed: 1 | Hunks: 1 | Methods Changed: 0 | Complexity Δ (Sum/Max): 0/0 | Churn Δ: 2 | Churn Cumulative: 389 | Contributors (this commit): 2 | Commits (past 90d): 12 | Contributors (cumulative): 2 | DMM Complexity: None\n\nDIFF:\n@@ -1,6 +1,6 @@\n \"\"\"FastAPI framework, high performance, easy to learn, fast to code, ready for production\"\"\"\n \n-__version__ = \"0.86.0\"\n+__version__ = \"0.87.0\"\n \n from starlette import status as status\n \n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "fastapi#7c5626bef7ab09d93083c9e1b593b23ba84dd78b", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 4 | Lines Deleted: 4 | Files Changed: 3 | Hunks: 4 | Methods Changed: 3 | Complexity Δ (Sum/Max): 0/0 | Churn Δ: 8 | Churn Cumulative: 3188 | Contributors (this commit): 52 | Commits (past 90d): 10 | Contributors (cumulative): 66 | DMM Complexity: None\n\nDIFF:\n@@ -105,10 +105,10 @@ def check_file_field(field: ModelField) -> None:\n                 assert parse_options_header\n             except ImportError:\n                 logger.error(multipart_incorrect_install_error)\n-                raise RuntimeError(multipart_incorrect_install_error)\n+                raise RuntimeError(multipart_incorrect_install_error) from None\n         except ImportError:\n             logger.error(multipart_not_installed_error)\n-            raise RuntimeError(multipart_not_installed_error)\n+            raise RuntimeError(multipart_not_installed_error) from None\n \n \n def get_param_sub_dependant(\n\n@@ -157,7 +157,7 @@ def jsonable_encoder(\n             data = vars(obj)\n         except Exception as e:\n             errors.append(e)\n-            raise ValueError(errors)\n+            raise ValueError(errors) from e\n     return jsonable_encoder(\n         data,\n         include=include,\n\n@@ -89,7 +89,7 @@ def create_response_field(\n     except RuntimeError:\n         raise fastapi.exceptions.FastAPIError(\n             f\"Invalid args for response field! Hint: check that {type_} is a valid pydantic field type\"\n-        )\n+        ) from None\n \n \n def create_cloned_field(\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "fastapi#884203676dfaf1d03c08fc79945493458b53e675", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 3 | Lines Deleted: 1 | Files Changed: 1 | Hunks: 1 | Methods Changed: 1 | Complexity Δ (Sum/Max): 0/0 | Churn Δ: 4 | Churn Cumulative: 604 | Contributors (this commit): 2 | Commits (past 90d): 3 | Contributors (cumulative): 2 | DMM Complexity: 1.0\n\nDIFF:\n@@ -284,7 +284,9 @@ def build_all():\n             continue\n         langs.append(lang.name)\n     cpu_count = os.cpu_count() or 1\n-    with Pool(cpu_count * 2) as p:\n+    process_pool_size = cpu_count * 4\n+    typer.echo(f\"Using process pool size: {process_pool_size}\")\n+    with Pool(process_pool_size) as p:\n         p.map(build_lang, langs)\n \n \n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "fastapi#46974c510e89c35456f40ca35d432fe0b94e0f97", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 13 | Lines Deleted: 1 | Files Changed: 1 | Hunks: 3 | Methods Changed: 2 | Complexity Δ (Sum/Max): 2/2 | Churn Δ: 14 | Churn Cumulative: 83 | Contributors (this commit): 4 | Commits (past 90d): 1 | Contributors (cumulative): 4 | DMM Complexity: 1.0\n\nDIFF:\n@@ -1,4 +1,4 @@\n-from fastapi import FastAPI, Path\n+from fastapi import FastAPI, Path, Query\n from fastapi.testclient import TestClient\n \n app = FastAPI()\n@@ -19,6 +19,11 @@ def path_convertor(param: str = Path()):\n     return {\"path\": param}\n \n \n+@app.get(\"/query/\")\n+def query_convertor(param: str = Query()):\n+    return {\"query\": param}\n+\n+\n client = TestClient(app)\n \n \n@@ -45,6 +50,13 @@ def test_route_converters_path():\n     assert response.json() == {\"path\": \"some/example\"}\n \n \n+def test_route_converters_query():\n+    # Test query conversion\n+    response = client.get(\"/query\", params={\"param\": \"Qué tal!\"})\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\"query\": \"Qué tal!\"}\n+\n+\n def test_url_path_for_path_convertor():\n     assert (\n         app.url_path_for(\"path_convertor\", param=\"some/example\") == \"/path/some/example\"\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "fastapi#612b8ff168beee33fcf0c0bdff9718b4c8b1ac63", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 1 | Lines Deleted: 1 | Files Changed: 1 | Hunks: 1 | Methods Changed: 0 | Complexity Δ (Sum/Max): 0/0 | Churn Δ: 2 | Churn Cumulative: 391 | Contributors (this commit): 2 | Commits (past 90d): 10 | Contributors (cumulative): 2 | DMM Complexity: None\n\nDIFF:\n@@ -1,6 +1,6 @@\n \"\"\"FastAPI framework, high performance, easy to learn, fast to code, ready for production\"\"\"\n \n-__version__ = \"0.87.0\"\n+__version__ = \"0.88.0\"\n \n from starlette import status as status\n \n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "fastapi#d0573f5713b0a8ce2dbb3d12d36a7fc34b89e2ff", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 1248 | Lines Deleted: 36 | Files Changed: 17 | Hunks: 48 | Methods Changed: 133 | Complexity Δ (Sum/Max): 83/69 | Churn Δ: 1284 | Churn Cumulative: 11236 | Contributors (this commit): 68 | Commits (past 90d): 21 | Contributors (cumulative): 113 | DMM Complexity: 0.9930555555555556\n\nDIFF:\n@@ -1,4 +1,4 @@\n-from typing import List, Union\n+from typing import Any, List, Union\n \n from fastapi import FastAPI\n from pydantic import BaseModel\n@@ -15,5 +15,13 @@ class Item(BaseModel):\n \n \n @app.post(\"/items/\", response_model=Item)\n-async def create_item(item: Item):\n+async def create_item(item: Item) -> Any:\n     return item\n+\n+\n+@app.get(\"/items/\", response_model=List[Item])\n+async def read_items() -> Any:\n+    return [\n+        {\"name\": \"Portal Gun\", \"price\": 42.0},\n+        {\"name\": \"Plumbus\", \"price\": 32.0},\n+    ]\n\n@@ -0,0 +1,27 @@\n+from typing import List, Union\n+\n+from fastapi import FastAPI\n+from pydantic import BaseModel\n+\n+app = FastAPI()\n+\n+\n+class Item(BaseModel):\n+    name: str\n+    description: Union[str, None] = None\n+    price: float\n+    tax: Union[float, None] = None\n+    tags: List[str] = []\n+\n+\n+@app.post(\"/items/\")\n+async def create_item(item: Item) -> Item:\n+    return item\n+\n+\n+@app.get(\"/items/\")\n+async def read_items() -> List[Item]:\n+    return [\n+        Item(name=\"Portal Gun\", price=42.0),\n+        Item(name=\"Plumbus\", price=32.0),\n+    ]\n\n@@ -0,0 +1,25 @@\n+from fastapi import FastAPI\n+from pydantic import BaseModel\n+\n+app = FastAPI()\n+\n+\n+class Item(BaseModel):\n+    name: str\n+    description: str | None = None\n+    price: float\n+    tax: float | None = None\n+    tags: list[str] = []\n+\n+\n+@app.post(\"/items/\")\n+async def create_item(item: Item) -> Item:\n+    return item\n+\n+\n+@app.get(\"/items/\")\n+async def read_items() -> list[Item]:\n+    return [\n+        Item(name=\"Portal Gun\", price=42.0),\n+        Item(name=\"Plumbus\", price=32.0),\n+    ]\n\n@@ -0,0 +1,27 @@\n+from typing import Union\n+\n+from fastapi import FastAPI\n+from pydantic import BaseModel\n+\n+app = FastAPI()\n+\n+\n+class Item(BaseModel):\n+    name: str\n+    description: Union[str, None] = None\n+    price: float\n+    tax: Union[float, None] = None\n+    tags: list[str] = []\n+\n+\n+@app.post(\"/items/\")\n+async def create_item(item: Item) -> Item:\n+    return item\n+\n+\n+@app.get(\"/items/\")\n+async def read_items() -> list[Item]:\n+    return [\n+        Item(name=\"Portal Gun\", price=42.0),\n+        Item(name=\"Plumbus\", price=32.0),\n+    ]\n\n@@ -1,3 +1,5 @@\n+from typing import Any\n+\n from fastapi import FastAPI\n from pydantic import BaseModel\n \n@@ -13,5 +15,13 @@ class Item(BaseModel):\n \n \n @app.post(\"/items/\", response_model=Item)\n-async def create_item(item: Item):\n+async def create_item(item: Item) -> Any:\n     return item\n+\n+\n+@app.get(\"/items/\", response_model=list[Item])\n+async def read_items() -> Any:\n+    return [\n+        {\"name\": \"Portal Gun\", \"price\": 42.0},\n+        {\"name\": \"Plumbus\", \"price\": 32.0},\n+    ]\n\n@@ -1,4 +1,4 @@\n-from typing import Union\n+from typing import Any, Union\n \n from fastapi import FastAPI\n from pydantic import BaseModel\n@@ -15,5 +15,13 @@ class Item(BaseModel):\n \n \n @app.post(\"/items/\", response_model=Item)\n-async def create_item(item: Item):\n+async def create_item(item: Item) -> Any:\n     return item\n+\n+\n+@app.get(\"/items/\", response_model=list[Item])\n+async def read_items() -> Any:\n+    return [\n+        {\"name\": \"Portal Gun\", \"price\": 42.0},\n+        {\"name\": \"Plumbus\", \"price\": 32.0},\n+    ]\n\n@@ -14,6 +14,6 @@ class UserIn(BaseModel):\n \n \n # Don't do this in production!\n-@app.post(\"/user/\", response_model=UserIn)\n-async def create_user(user: UserIn):\n+@app.post(\"/user/\")\n+async def create_user(user: UserIn) -> UserIn:\n     return user\n\n@@ -12,6 +12,6 @@ class UserIn(BaseModel):\n \n \n # Don't do this in production!\n-@app.post(\"/user/\", response_model=UserIn)\n-async def create_user(user: UserIn):\n+@app.post(\"/user/\")\n+async def create_user(user: UserIn) -> UserIn:\n     return user\n\n@@ -1,4 +1,4 @@\n-from typing import Union\n+from typing import Any, Union\n \n from fastapi import FastAPI\n from pydantic import BaseModel, EmailStr\n@@ -20,5 +20,5 @@ class UserOut(BaseModel):\n \n \n @app.post(\"/user/\", response_model=UserOut)\n-async def create_user(user: UserIn):\n+async def create_user(user: UserIn) -> Any:\n     return user\n\n@@ -0,0 +1,21 @@\n+from typing import Union\n+\n+from fastapi import FastAPI\n+from pydantic import BaseModel, EmailStr\n+\n+app = FastAPI()\n+\n+\n+class BaseUser(BaseModel):\n+    username: str\n+    email: EmailStr\n+    full_name: Union[str, None] = None\n+\n+\n+class UserIn(BaseUser):\n+    password: str\n+\n+\n+@app.post(\"/user/\")\n+async def create_user(user: UserIn) -> BaseUser:\n+    return user\n\n@@ -0,0 +1,19 @@\n+from fastapi import FastAPI\n+from pydantic import BaseModel, EmailStr\n+\n+app = FastAPI()\n+\n+\n+class BaseUser(BaseModel):\n+    username: str\n+    email: EmailStr\n+    full_name: str | None = None\n+\n+\n+class UserIn(BaseUser):\n+    password: str\n+\n+\n+@app.post(\"/user/\")\n+async def create_user(user: UserIn) -> BaseUser:\n+    return user\n\n@@ -1,3 +1,5 @@\n+from typing import Any\n+\n from fastapi import FastAPI\n from pydantic import BaseModel, EmailStr\n \n@@ -18,5 +20,5 @@ class UserOut(BaseModel):\n \n \n @app.post(\"/user/\", response_model=UserOut)\n-async def create_user(user: UserIn):\n+async def create_user(user: UserIn) -> Any:\n     return user\n\n@@ -274,7 +274,7 @@ class FastAPI(Starlette):\n         path: str,\n         endpoint: Callable[..., Coroutine[Any, Any, Response]],\n         *,\n-        response_model: Any = None,\n+        response_model: Any = Default(None),\n         status_code: Optional[int] = None,\n         tags: Optional[List[Union[str, Enum]]] = None,\n         dependencies: Optional[Sequence[Depends]] = None,\n@@ -332,7 +332,7 @@ class FastAPI(Starlette):\n         self,\n         path: str,\n         *,\n-        response_model: Any = None,\n+        response_model: Any = Default(None),\n         status_code: Optional[int] = None,\n         tags: Optional[List[Union[str, Enum]]] = None,\n         dependencies: Optional[Sequence[Depends]] = None,\n@@ -435,7 +435,7 @@ class FastAPI(Starlette):\n         self,\n         path: str,\n         *,\n-        response_model: Any = None,\n+        response_model: Any = Default(None),\n         status_code: Optional[int] = None,\n         tags: Optional[List[Union[str, Enum]]] = None,\n         dependencies: Optional[Sequence[Depends]] = None,\n@@ -490,7 +490,7 @@ class FastAPI(Starlette):\n         self,\n         path: str,\n         *,\n-        response_model: Any = None,\n+        response_model: Any = Default(None),\n         status_code: Optional[int] = None,\n         tags: Optional[List[Union[str, Enum]]] = None,\n         dependencies: Optional[Sequence[Depends]] = None,\n@@ -545,7 +545,7 @@ class FastAPI(Starlette):\n         self,\n         path: str,\n         *,\n-        response_model: Any = None,\n+        response_model: Any = Default(None),\n         status_code: Optional[int] = None,\n         tags: Optional[List[Union[str, Enum]]] = None,\n         dependencies: Optional[Sequence[Depends]] = None,\n@@ -600,7 +600,7 @@ class FastAPI(Starlette):\n         self,\n         path: str,\n         *,\n-        response_model: Any = None,\n+        response_model: Any = Default(None),\n         status_code: Optional[int] = None,\n         tags: Optional[List[Union[str, Enum]]] = None,\n         dependencies: Optional[Sequence[Depends]] = None,\n@@ -655,7 +655,7 @@ class FastAPI(Starlette):\n         self,\n         path: str,\n         *,\n-        response_model: Any = None,\n+        response_model: Any = Default(None),\n         status_code: Optional[int] = None,\n         tags: Optional[List[Union[str, Enum]]] = None,\n         dependencies: Optional[Sequence[Depends]] = None,\n@@ -710,7 +710,7 @@ class FastAPI(Starlette):\n         self,\n         path: str,\n         *,\n-        response_model: Any = None,\n+        response_model: Any = Default(None),\n         status_code: Optional[int] = None,\n         tags: Optional[List[Union[str, Enum]]] = None,\n         dependencies: Optional[Sequence[Depends]] = None,\n@@ -765,7 +765,7 @@ class FastAPI(Starlette):\n         self,\n         path: str,\n         *,\n-        response_model: Any = None,\n+        response_model: Any = Default(None),\n         status_code: Optional[int] = None,\n         tags: Optional[List[Union[str, Enum]]] = None,\n         dependencies: Optional[Sequence[Depends]] = None,\n@@ -820,7 +820,7 @@ class FastAPI(Starlette):\n         self,\n         path: str,\n         *,\n-        response_model: Any = None,\n+        response_model: Any = Default(None),\n         status_code: Optional[int] = None,\n         tags: Optional[List[Union[str, Enum]]] = None,\n         dependencies: Optional[Sequence[Depends]] = None,\n\n@@ -253,7 +253,7 @@ def get_typed_signature(call: Callable[..., Any]) -> inspect.Signature:\n             name=param.name,\n             kind=param.kind,\n             default=param.default,\n-            annotation=get_typed_annotation(param, globalns),\n+            annotation=get_typed_annotation(param.annotation, globalns),\n         )\n         for param in signature.parameters.values()\n     ]\n@@ -261,14 +261,24 @@ def get_typed_signature(call: Callable[..., Any]) -> inspect.Signature:\n     return typed_signature\n \n \n-def get_typed_annotation(param: inspect.Parameter, globalns: Dict[str, Any]) -> Any:\n-    annotation = param.annotation\n+def get_typed_annotation(annotation: Any, globalns: Dict[str, Any]) -> Any:\n     if isinstance(annotation, str):\n         annotation = ForwardRef(annotation)\n         annotation = evaluate_forwardref(annotation, globalns, globalns)\n     return annotation\n \n \n+def get_typed_return_annotation(call: Callable[..., Any]) -> Any:\n+    signature = inspect.signature(call)\n+    annotation = signature.return_annotation\n+\n+    if annotation is inspect.Signature.empty:\n+        return None\n+\n+    globalns = getattr(call, \"__globals__\", {})\n+    return get_typed_annotation(annotation, globalns)\n+\n+\n def get_dependant(\n     *,\n     path: str,\n\n@@ -26,6 +26,7 @@ from fastapi.dependencies.utils import (\n     get_body_field,\n     get_dependant,\n     get_parameterless_sub_dependant,\n+    get_typed_return_annotation,\n     solve_dependencies,\n )\n from fastapi.encoders import DictIntStrAny, SetIntStr, jsonable_encoder\n@@ -323,7 +324,7 @@ class APIRoute(routing.Route):\n         path: str,\n         endpoint: Callable[..., Any],\n         *,\n-        response_model: Any = None,\n+        response_model: Any = Default(None),\n         status_code: Optional[int] = None,\n         tags: Optional[List[Union[str, Enum]]] = None,\n         dependencies: Optional[Sequence[params.Depends]] = None,\n@@ -354,6 +355,8 @@ class APIRoute(routing.Route):\n     ) -> None:\n         self.path = path\n         self.endpoint = endpoint\n+        if isinstance(response_model, DefaultPlaceholder):\n+            response_model = get_typed_return_annotation(endpoint)\n         self.response_model = response_model\n         self.summary = summary\n         self.response_description = response_description\n@@ -519,7 +522,7 @@ class APIRouter(routing.Router):\n         path: str,\n         endpoint: Callable[..., Any],\n         *,\n-        response_model: Any = None,\n+        response_model: Any = Default(None),\n         status_code: Optional[int] = None,\n         tags: Optional[List[Union[str, Enum]]] = None,\n         dependencies: Optional[Sequence[params.Depends]] = None,\n@@ -600,7 +603,7 @@ class APIRouter(routing.Router):\n         self,\n         path: str,\n         *,\n-        response_model: Any = None,\n+        response_model: Any = Default(None),\n         status_code: Optional[int] = None,\n         tags: Optional[List[Union[str, Enum]]] = None,\n         dependencies: Optional[Sequence[params.Depends]] = None,\n@@ -795,7 +798,7 @@ class APIRouter(routing.Router):\n         self,\n         path: str,\n         *,\n-        response_model: Any = None,\n+        response_model: Any = Default(None),\n         status_code: Optional[int] = None,\n         tags: Optional[List[Union[str, Enum]]] = None,\n         dependencies: Optional[Sequence[params.Depends]] = None,\n@@ -851,7 +854,7 @@ class APIRouter(routing.Router):\n         self,\n         path: str,\n         *,\n-        response_model: Any = None,\n+        response_model: Any = Default(None),\n         status_code: Optional[int] = None,\n         tags: Optional[List[Union[str, Enum]]] = None,\n         dependencies: Optional[Sequence[params.Depends]] = None,\n@@ -907,7 +910,7 @@ class APIRouter(routing.Router):\n         self,\n         path: str,\n         *,\n-        response_model: Any = None,\n+        response_model: Any = Default(None),\n         status_code: Optional[int] = None,\n         tags: Optional[List[Union[str, Enum]]] = None,\n         dependencies: Optional[Sequence[params.Depends]] = None,\n@@ -963,7 +966,7 @@ class APIRouter(routing.Router):\n         self,\n         path: str,\n         *,\n-        response_model: Any = None,\n+        response_model: Any = Default(None),\n         status_code: Optional[int] = None,\n         tags: Optional[List[Union[str, Enum]]] = None,\n         dependencies: Optional[Sequence[params.Depends]] = None,\n@@ -1019,7 +1022,7 @@ class APIRouter(routing.Router):\n         self,\n         path: str,\n         *,\n-        response_model: Any = None,\n+        response_model: Any = Default(None),\n         status_code: Optional[int] = None,\n         tags: Optional[List[Union[str, Enum]]] = None,\n         dependencies: Optional[Sequence[params.Depends]] = None,\n@@ -1075,7 +1078,7 @@ class APIRouter(routing.Router):\n         self,\n         path: str,\n         *,\n-        response_model: Any = None,\n+        response_model: Any = Default(None),\n         status_code: Optional[int] = None,\n         tags: Optional[List[Union[str, Enum]]] = None,\n         dependencies: Optional[Sequence[params.Depends]] = None,\n@@ -1131,7 +1134,7 @@ class APIRouter(routing.Router):\n         self,\n         path: str,\n         *,\n-        response_model: Any = None,\n+        response_model: Any = Default(None),\n         status_code: Optional[int] = None,\n         tags: Optional[List[Union[str, Enum]]] = None,\n         dependencies: Optional[Sequence[params.Depends]] = None,\n@@ -1187,7 +1190,7 @@ class APIRouter(routing.Router):\n         self,\n         path: str,\n         *,\n-        response_model: Any = None,\n+        response_model: Any = Default(None),\n         status_code: Optional[int] = None,\n         tags: Optional[List[Union[str, Enum]]] = None,\n         dependencies: Optional[Sequence[params.Depends]] = None,\n\n@@ -9,6 +9,7 @@ app = FastAPI()\n @app.delete(\n     \"/{id}\",\n     status_code=204,\n+    response_model=None,\n )\n async def delete_deployment(\n     id: int,\n\n@@ -0,0 +1,1051 @@\n+from typing import List, Union\n+\n+import pytest\n+from fastapi import FastAPI\n+from fastapi.testclient import TestClient\n+from pydantic import BaseModel, ValidationError\n+\n+\n+class BaseUser(BaseModel):\n+    name: str\n+\n+\n+class User(BaseUser):\n+    surname: str\n+\n+\n+class DBUser(User):\n+    password_hash: str\n+\n+\n+class Item(BaseModel):\n+    name: str\n+    price: float\n+\n+\n+app = FastAPI()\n+\n+\n+@app.get(\"/no_response_model-no_annotation-return_model\")\n+def no_response_model_no_annotation_return_model():\n+    return User(name=\"John\", surname=\"Doe\")\n+\n+\n+@app.get(\"/no_response_model-no_annotation-return_dict\")\n+def no_response_model_no_annotation_return_dict():\n+    return {\"name\": \"John\", \"surname\": \"Doe\"}\n+\n+\n+@app.get(\"/response_model-no_annotation-return_same_model\", response_model=User)\n+def response_model_no_annotation_return_same_model():\n+    return User(name=\"John\", surname=\"Doe\")\n+\n+\n+@app.get(\"/response_model-no_annotation-return_exact_dict\", response_model=User)\n+def response_model_no_annotation_return_exact_dict():\n+    return {\"name\": \"John\", \"surname\": \"Doe\"}\n+\n+\n+@app.get(\"/response_model-no_annotation-return_invalid_dict\", response_model=User)\n+def response_model_no_annotation_return_invalid_dict():\n+    return {\"name\": \"John\"}\n+\n+\n+@app.get(\"/response_model-no_annotation-return_invalid_model\", response_model=User)\n+def response_model_no_annotation_return_invalid_model():\n+    return Item(name=\"Foo\", price=42.0)\n+\n+\n+@app.get(\n+    \"/response_model-no_annotation-return_dict_with_extra_data\", response_model=User\n+)\n+def response_model_no_annotation_return_dict_with_extra_data():\n+    return {\"name\": \"John\", \"surname\": \"Doe\", \"password_hash\": \"secret\"}\n+\n+\n+@app.get(\n+    \"/response_model-no_annotation-return_submodel_with_extra_data\", response_model=User\n+)\n+def response_model_no_annotation_return_submodel_with_extra_data():\n+    return DBUser(name=\"John\", surname=\"Doe\", password_hash=\"secret\")\n+\n+\n+@app.get(\"/no_response_model-annotation-return_same_model\")\n+def no_response_model_annotation_return_same_model() -> User:\n+    return User(name=\"John\", surname=\"Doe\")\n+\n+\n+@app.get(\"/no_response_model-annotation-return_exact_dict\")\n+def no_response_model_annotation_return_exact_dict() -> User:\n+    return {\"name\": \"John\", \"surname\": \"Doe\"}\n+\n+\n+@app.get(\"/no_response_model-annotation-return_invalid_dict\")\n+def no_response_model_annotation_return_invalid_dict() -> User:\n+    return {\"name\": \"John\"}\n+\n+\n+@app.get(\"/no_response_model-annotation-return_invalid_model\")\n+def no_response_model_annotation_return_invalid_model() -> User:\n+    return Item(name=\"Foo\", price=42.0)\n+\n+\n+@app.get(\"/no_response_model-annotation-return_dict_with_extra_data\")\n+def no_response_model_annotation_return_dict_with_extra_data() -> User:\n+    return {\"name\": \"John\", \"surname\": \"Doe\", \"password_hash\": \"secret\"}\n+\n+\n+@app.get(\"/no_response_model-annotation-return_submodel_with_extra_data\")\n+def no_response_model_annotation_return_submodel_with_extra_data() -> User:\n+    return DBUser(name=\"John\", surname=\"Doe\", password_hash=\"secret\")\n+\n+\n+@app.get(\"/response_model_none-annotation-return_same_model\", response_model=None)\n+def response_model_none_annotation_return_same_model() -> User:\n+    return User(name=\"John\", surname=\"Doe\")\n+\n+\n+@app.get(\"/response_model_none-annotation-return_exact_dict\", response_model=None)\n+def response_model_none_annotation_return_exact_dict() -> User:\n+    return {\"name\": \"John\", \"surname\": \"Doe\"}\n+\n+\n+@app.get(\"/response_model_none-annotation-return_invalid_dict\", response_model=None)\n+def response_model_none_annotation_return_invalid_dict() -> User:\n+    return {\"name\": \"John\"}\n+\n+\n+@app.get(\"/response_model_none-annotation-return_invalid_model\", response_model=None)\n+def response_model_none_annotation_return_invalid_model() -> User:\n+    return Item(name=\"Foo\", price=42.0)\n+\n+\n+@app.get(\n+    \"/response_model_none-annotation-return_dict_with_extra_data\", response_model=None\n+)\n+def response_model_none_annotation_return_dict_with_extra_data() -> User:\n+    return {\"name\": \"John\", \"surname\": \"Doe\", \"password_hash\": \"secret\"}\n+\n+\n+@app.get(\n+    \"/response_model_none-annotation-return_submodel_with_extra_data\",\n+    response_model=None,\n+)\n+def response_model_none_annotation_return_submodel_with_extra_data() -> User:\n+    return DBUser(name=\"John\", surname=\"Doe\", password_hash=\"secret\")\n+\n+\n+@app.get(\n+    \"/response_model_model1-annotation_model2-return_same_model\", response_model=User\n+)\n+def response_model_model1_annotation_model2_return_same_model() -> Item:\n+    return User(name=\"John\", surname=\"Doe\")\n+\n+\n+@app.get(\n+    \"/response_model_model1-annotation_model2-return_exact_dict\", response_model=User\n+)\n+def response_model_model1_annotation_model2_return_exact_dict() -> Item:\n+    return {\"name\": \"John\", \"surname\": \"Doe\"}\n+\n+\n+@app.get(\n+    \"/response_model_model1-annotation_model2-return_invalid_dict\", response_model=User\n+)\n+def response_model_model1_annotation_model2_return_invalid_dict() -> Item:\n+    return {\"name\": \"John\"}\n+\n+\n+@app.get(\n+    \"/response_model_model1-annotation_model2-return_invalid_model\", response_model=User\n+)\n+def response_model_model1_annotation_model2_return_invalid_model() -> Item:\n+    return Item(name=\"Foo\", price=42.0)\n+\n+\n+@app.get(\n+    \"/response_model_model1-annotation_model2-return_dict_with_extra_data\",\n+    response_model=User,\n+)\n+def response_model_model1_annotation_model2_return_dict_with_extra_data() -> Item:\n+    return {\"name\": \"John\", \"surname\": \"Doe\", \"password_hash\": \"secret\"}\n+\n+\n+@app.get(\n+    \"/response_model_model1-annotation_model2-return_submodel_with_extra_data\",\n+    response_model=User,\n+)\n+def response_model_model1_annotation_model2_return_submodel_with_extra_data() -> Item:\n+    return DBUser(name=\"John\", surname=\"Doe\", password_hash=\"secret\")\n+\n+\n+@app.get(\n+    \"/response_model_filtering_model-annotation_submodel-return_submodel\",\n+    response_model=User,\n+)\n+def response_model_filtering_model_annotation_submodel_return_submodel() -> DBUser:\n+    return DBUser(name=\"John\", surname=\"Doe\", password_hash=\"secret\")\n+\n+\n+@app.get(\"/response_model_list_of_model-no_annotation\", response_model=List[User])\n+def response_model_list_of_model_no_annotation():\n+    return [\n+        DBUser(name=\"John\", surname=\"Doe\", password_hash=\"secret\"),\n+        DBUser(name=\"Jane\", surname=\"Does\", password_hash=\"secret2\"),\n+    ]\n+\n+\n+@app.get(\"/no_response_model-annotation_list_of_model\")\n+def no_response_model_annotation_list_of_model() -> List[User]:\n+    return [\n+        DBUser(name=\"John\", surname=\"Doe\", password_hash=\"secret\"),\n+        DBUser(name=\"Jane\", surname=\"Does\", password_hash=\"secret2\"),\n+    ]\n+\n+\n+@app.get(\"/no_response_model-annotation_forward_ref_list_of_model\")\n+def no_response_model_annotation_forward_ref_list_of_model() -> \"List[User]\":\n+    return [\n+        DBUser(name=\"John\", surname=\"Doe\", password_hash=\"secret\"),\n+        DBUser(name=\"Jane\", surname=\"Does\", password_hash=\"secret2\"),\n+    ]\n+\n+\n+@app.get(\n+    \"/response_model_union-no_annotation-return_model1\",\n+    response_model=Union[User, Item],\n+)\n+def response_model_union_no_annotation_return_model1():\n+    return DBUser(name=\"John\", surname=\"Doe\", password_hash=\"secret\")\n+\n+\n+@app.get(\n+    \"/response_model_union-no_annotation-return_model2\",\n+    response_model=Union[User, Item],\n+)\n+def response_model_union_no_annotation_return_model2():\n+    return Item(name=\"Foo\", price=42.0)\n+\n+\n+@app.get(\"/no_response_model-annotation_union-return_model1\")\n+def no_response_model_annotation_union_return_model1() -> Union[User, Item]:\n+    return DBUser(name=\"John\", surname=\"Doe\", password_hash=\"secret\")\n+\n+\n+@app.get(\"/no_response_model-annotation_union-return_model2\")\n+def no_response_model_annotation_union_return_model2() -> Union[User, Item]:\n+    return Item(name=\"Foo\", price=42.0)\n+\n+\n+openapi_schema = {\n+    \"openapi\": \"3.0.2\",\n+    \"info\": {\"title\": \"FastAPI\", \"version\": \"0.1.0\"},\n+    \"paths\": {\n+        \"/no_response_model-no_annotation-return_model\": {\n+            \"get\": {\n+                \"summary\": \"No Response Model No Annotation Return Model\",\n+                \"operationId\": \"no_response_model_no_annotation_return_model_no_response_model_no_annotation_return_model_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\"application/json\": {\"schema\": {}}},\n+                    }\n+                },\n+            }\n+        },\n+        \"/no_response_model-no_annotation-return_dict\": {\n+            \"get\": {\n+                \"summary\": \"No Response Model No Annotation Return Dict\",\n+                \"operationId\": \"no_response_model_no_annotation_return_dict_no_response_model_no_annotation_return_dict_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\"application/json\": {\"schema\": {}}},\n+                    }\n+                },\n+            }\n+        },\n+        \"/response_model-no_annotation-return_same_model\": {\n+            \"get\": {\n+                \"summary\": \"Response Model No Annotation Return Same Model\",\n+                \"operationId\": \"response_model_no_annotation_return_same_model_response_model_no_annotation_return_same_model_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\"$ref\": \"#/components/schemas/User\"}\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+        \"/response_model-no_annotation-return_exact_dict\": {\n+            \"get\": {\n+                \"summary\": \"Response Model No Annotation Return Exact Dict\",\n+                \"operationId\": \"response_model_no_annotation_return_exact_dict_response_model_no_annotation_return_exact_dict_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\"$ref\": \"#/components/schemas/User\"}\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+        \"/response_model-no_annotation-return_invalid_dict\": {\n+            \"get\": {\n+                \"summary\": \"Response Model No Annotation Return Invalid Dict\",\n+                \"operationId\": \"response_model_no_annotation_return_invalid_dict_response_model_no_annotation_return_invalid_dict_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\"$ref\": \"#/components/schemas/User\"}\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+        \"/response_model-no_annotation-return_invalid_model\": {\n+            \"get\": {\n+                \"summary\": \"Response Model No Annotation Return Invalid Model\",\n+                \"operationId\": \"response_model_no_annotation_return_invalid_model_response_model_no_annotation_return_invalid_model_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\"$ref\": \"#/components/schemas/User\"}\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+        \"/response_model-no_annotation-return_dict_with_extra_data\": {\n+            \"get\": {\n+                \"summary\": \"Response Model No Annotation Return Dict With Extra Data\",\n+                \"operationId\": \"response_model_no_annotation_return_dict_with_extra_data_response_model_no_annotation_return_dict_with_extra_data_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\"$ref\": \"#/components/schemas/User\"}\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+        \"/response_model-no_annotation-return_submodel_with_extra_data\": {\n+            \"get\": {\n+                \"summary\": \"Response Model No Annotation Return Submodel With Extra Data\",\n+                \"operationId\": \"response_model_no_annotation_return_submodel_with_extra_data_response_model_no_annotation_return_submodel_with_extra_data_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\"$ref\": \"#/components/schemas/User\"}\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+        \"/no_response_model-annotation-return_same_model\": {\n+            \"get\": {\n+                \"summary\": \"No Response Model Annotation Return Same Model\",\n+                \"operationId\": \"no_response_model_annotation_return_same_model_no_response_model_annotation_return_same_model_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\"$ref\": \"#/components/schemas/User\"}\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+        \"/no_response_model-annotation-return_exact_dict\": {\n+            \"get\": {\n+                \"summary\": \"No Response Model Annotation Return Exact Dict\",\n+                \"operationId\": \"no_response_model_annotation_return_exact_dict_no_response_model_annotation_return_exact_dict_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\"$ref\": \"#/components/schemas/User\"}\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+        \"/no_response_model-annotation-return_invalid_dict\": {\n+            \"get\": {\n+                \"summary\": \"No Response Model Annotation Return Invalid Dict\",\n+                \"operationId\": \"no_response_model_annotation_return_invalid_dict_no_response_model_annotation_return_invalid_dict_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\"$ref\": \"#/components/schemas/User\"}\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+        \"/no_response_model-annotation-return_invalid_model\": {\n+            \"get\": {\n+                \"summary\": \"No Response Model Annotation Return Invalid Model\",\n+                \"operationId\": \"no_response_model_annotation_return_invalid_model_no_response_model_annotation_return_invalid_model_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\"$ref\": \"#/components/schemas/User\"}\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+        \"/no_response_model-annotation-return_dict_with_extra_data\": {\n+            \"get\": {\n+                \"summary\": \"No Response Model Annotation Return Dict With Extra Data\",\n+                \"operationId\": \"no_response_model_annotation_return_dict_with_extra_data_no_response_model_annotation_return_dict_with_extra_data_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\"$ref\": \"#/components/schemas/User\"}\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+        \"/no_response_model-annotation-return_submodel_with_extra_data\": {\n+            \"get\": {\n+                \"summary\": \"No Response Model Annotation Return Submodel With Extra Data\",\n+                \"operationId\": \"no_response_model_annotation_return_submodel_with_extra_data_no_response_model_annotation_return_submodel_with_extra_data_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\"$ref\": \"#/components/schemas/User\"}\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+        \"/response_model_none-annotation-return_same_model\": {\n+            \"get\": {\n+                \"summary\": \"Response Model None Annotation Return Same Model\",\n+                \"operationId\": \"response_model_none_annotation_return_same_model_response_model_none_annotation_return_same_model_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\"application/json\": {\"schema\": {}}},\n+                    }\n+                },\n+            }\n+        },\n+        \"/response_model_none-annotation-return_exact_dict\": {\n+            \"get\": {\n+                \"summary\": \"Response Model None Annotation Return Exact Dict\",\n+                \"operationId\": \"response_model_none_annotation_return_exact_dict_response_model_none_annotation_return_exact_dict_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\"application/json\": {\"schema\": {}}},\n+                    }\n+                },\n+            }\n+        },\n+        \"/response_model_none-annotation-return_invalid_dict\": {\n+            \"get\": {\n+                \"summary\": \"Response Model None Annotation Return Invalid Dict\",\n+                \"operationId\": \"response_model_none_annotation_return_invalid_dict_response_model_none_annotation_return_invalid_dict_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\"application/json\": {\"schema\": {}}},\n+                    }\n+                },\n+            }\n+        },\n+        \"/response_model_none-annotation-return_invalid_model\": {\n+            \"get\": {\n+                \"summary\": \"Response Model None Annotation Return Invalid Model\",\n+                \"operationId\": \"response_model_none_annotation_return_invalid_model_response_model_none_annotation_return_invalid_model_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\"application/json\": {\"schema\": {}}},\n+                    }\n+                },\n+            }\n+        },\n+        \"/response_model_none-annotation-return_dict_with_extra_data\": {\n+            \"get\": {\n+                \"summary\": \"Response Model None Annotation Return Dict With Extra Data\",\n+                \"operationId\": \"response_model_none_annotation_return_dict_with_extra_data_response_model_none_annotation_return_dict_with_extra_data_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\"application/json\": {\"schema\": {}}},\n+                    }\n+                },\n+            }\n+        },\n+        \"/response_model_none-annotation-return_submodel_with_extra_data\": {\n+            \"get\": {\n+                \"summary\": \"Response Model None Annotation Return Submodel With Extra Data\",\n+                \"operationId\": \"response_model_none_annotation_return_submodel_with_extra_data_response_model_none_annotation_return_submodel_with_extra_data_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\"application/json\": {\"schema\": {}}},\n+                    }\n+                },\n+            }\n+        },\n+        \"/response_model_model1-annotation_model2-return_same_model\": {\n+            \"get\": {\n+                \"summary\": \"Response Model Model1 Annotation Model2 Return Same Model\",\n+                \"operationId\": \"response_model_model1_annotation_model2_return_same_model_response_model_model1_annotation_model2_return_same_model_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\"$ref\": \"#/components/schemas/User\"}\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+        \"/response_model_model1-annotation_model2-return_exact_dict\": {\n+            \"get\": {\n+                \"summary\": \"Response Model Model1 Annotation Model2 Return Exact Dict\",\n+                \"operationId\": \"response_model_model1_annotation_model2_return_exact_dict_response_model_model1_annotation_model2_return_exact_dict_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\"$ref\": \"#/components/schemas/User\"}\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+        \"/response_model_model1-annotation_model2-return_invalid_dict\": {\n+            \"get\": {\n+                \"summary\": \"Response Model Model1 Annotation Model2 Return Invalid Dict\",\n+                \"operationId\": \"response_model_model1_annotation_model2_return_invalid_dict_response_model_model1_annotation_model2_return_invalid_dict_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\"$ref\": \"#/components/schemas/User\"}\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+        \"/response_model_model1-annotation_model2-return_invalid_model\": {\n+            \"get\": {\n+                \"summary\": \"Response Model Model1 Annotation Model2 Return Invalid Model\",\n+                \"operationId\": \"response_model_model1_annotation_model2_return_invalid_model_response_model_model1_annotation_model2_return_invalid_model_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\"$ref\": \"#/components/schemas/User\"}\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+        \"/response_model_model1-annotation_model2-return_dict_with_extra_data\": {\n+            \"get\": {\n+                \"summary\": \"Response Model Model1 Annotation Model2 Return Dict With Extra Data\",\n+                \"operationId\": \"response_model_model1_annotation_model2_return_dict_with_extra_data_response_model_model1_annotation_model2_return_dict_with_extra_data_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\"$ref\": \"#/components/schemas/User\"}\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+        \"/response_model_model1-annotation_model2-return_submodel_with_extra_data\": {\n+            \"get\": {\n+                \"summary\": \"Response Model Model1 Annotation Model2 Return Submodel With Extra Data\",\n+                \"operationId\": \"response_model_model1_annotation_model2_return_submodel_with_extra_data_response_model_model1_annotation_model2_return_submodel_with_extra_data_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\"$ref\": \"#/components/schemas/User\"}\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+        \"/response_model_filtering_model-annotation_submodel-return_submodel\": {\n+            \"get\": {\n+                \"summary\": \"Response Model Filtering Model Annotation Submodel Return Submodel\",\n+                \"operationId\": \"response_model_filtering_model_annotation_submodel_return_submodel_response_model_filtering_model_annotation_submodel_return_submodel_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\"$ref\": \"#/components/schemas/User\"}\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+        \"/response_model_list_of_model-no_annotation\": {\n+            \"get\": {\n+                \"summary\": \"Response Model List Of Model No Annotation\",\n+                \"operationId\": \"response_model_list_of_model_no_annotation_response_model_list_of_model_no_annotation_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\n+                                    \"title\": \"Response Response Model List Of Model No Annotation Response Model List Of Model No Annotation Get\",\n+                                    \"type\": \"array\",\n+                                    \"items\": {\"$ref\": \"#/components/schemas/User\"},\n+                                }\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+        \"/no_response_model-annotation_list_of_model\": {\n+            \"get\": {\n+                \"summary\": \"No Response Model Annotation List Of Model\",\n+                \"operationId\": \"no_response_model_annotation_list_of_model_no_response_model_annotation_list_of_model_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\n+                                    \"title\": \"Response No Response Model Annotation List Of Model No Response Model Annotation List Of Model Get\",\n+                                    \"type\": \"array\",\n+                                    \"items\": {\"$ref\": \"#/components/schemas/User\"},\n+                                }\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+        \"/no_response_model-annotation_forward_ref_list_of_model\": {\n+            \"get\": {\n+                \"summary\": \"No Response Model Annotation Forward Ref List Of Model\",\n+                \"operationId\": \"no_response_model_annotation_forward_ref_list_of_model_no_response_model_annotation_forward_ref_list_of_model_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\n+                                    \"title\": \"Response No Response Model Annotation Forward Ref List Of Model No Response Model Annotation Forward Ref List Of Model Get\",\n+                                    \"type\": \"array\",\n+                                    \"items\": {\"$ref\": \"#/components/schemas/User\"},\n+                                }\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+        \"/response_model_union-no_annotation-return_model1\": {\n+            \"get\": {\n+                \"summary\": \"Response Model Union No Annotation Return Model1\",\n+                \"operationId\": \"response_model_union_no_annotation_return_model1_response_model_union_no_annotation_return_model1_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\n+                                    \"title\": \"Response Response Model Union No Annotation Return Model1 Response Model Union No Annotation Return Model1 Get\",\n+                                    \"anyOf\": [\n+                                        {\"$ref\": \"#/components/schemas/User\"},\n+                                        {\"$ref\": \"#/components/schemas/Item\"},\n+                                    ],\n+                                }\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+        \"/response_model_union-no_annotation-return_model2\": {\n+            \"get\": {\n+                \"summary\": \"Response Model Union No Annotation Return Model2\",\n+                \"operationId\": \"response_model_union_no_annotation_return_model2_response_model_union_no_annotation_return_model2_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\n+                                    \"title\": \"Response Response Model Union No Annotation Return Model2 Response Model Union No Annotation Return Model2 Get\",\n+                                    \"anyOf\": [\n+                                        {\"$ref\": \"#/components/schemas/User\"},\n+                                        {\"$ref\": \"#/components/schemas/Item\"},\n+                                    ],\n+                                }\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+        \"/no_response_model-annotation_union-return_model1\": {\n+            \"get\": {\n+                \"summary\": \"No Response Model Annotation Union Return Model1\",\n+                \"operationId\": \"no_response_model_annotation_union_return_model1_no_response_model_annotation_union_return_model1_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\n+                                    \"title\": \"Response No Response Model Annotation Union Return Model1 No Response Model Annotation Union Return Model1 Get\",\n+                                    \"anyOf\": [\n+                                        {\"$ref\": \"#/components/schemas/User\"},\n+                                        {\"$ref\": \"#/components/schemas/Item\"},\n+                                    ],\n+                                }\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+        \"/no_response_model-annotation_union-return_model2\": {\n+            \"get\": {\n+                \"summary\": \"No Response Model Annotation Union Return Model2\",\n+                \"operationId\": \"no_response_model_annotation_union_return_model2_no_response_model_annotation_union_return_model2_get\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"Successful Response\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\n+                                    \"title\": \"Response No Response Model Annotation Union Return Model2 No Response Model Annotation Union Return Model2 Get\",\n+                                    \"anyOf\": [\n+                                        {\"$ref\": \"#/components/schemas/User\"},\n+                                        {\"$ref\": \"#/components/schemas/Item\"},\n+                                    ],\n+                                }\n+                            }\n+                        },\n+                    }\n+                },\n+            }\n+        },\n+    },\n+    \"components\": {\n+        \"schemas\": {\n+            \"Item\": {\n+                \"title\": \"Item\",\n+                \"required\": [\"name\", \"price\"],\n+                \"type\": \"object\",\n+                \"properties\": {\n+                    \"name\": {\"title\": \"Name\", \"type\": \"string\"},\n+                    \"price\": {\"title\": \"Price\", \"type\": \"number\"},\n+                },\n+            },\n+            \"User\": {\n+                \"title\": \"User\",\n+                \"required\": [\"name\", \"surname\"],\n+                \"type\": \"object\",\n+                \"properties\": {\n+                    \"name\": {\"title\": \"Name\", \"type\": \"string\"},\n+                    \"surname\": {\"title\": \"Surname\", \"type\": \"string\"},\n+                },\n+            },\n+        }\n+    },\n+}\n+\n+\n+client = TestClient(app)\n+\n+\n+def test_openapi_schema():\n+    response = client.get(\"/openapi.json\")\n+    assert response.status_code == 200, response.text\n+    assert response.json() == openapi_schema\n+\n+\n+def test_no_response_model_no_annotation_return_model():\n+    response = client.get(\"/no_response_model-no_annotation-return_model\")\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\"name\": \"John\", \"surname\": \"Doe\"}\n+\n+\n+def test_no_response_model_no_annotation_return_dict():\n+    response = client.get(\"/no_response_model-no_annotation-return_dict\")\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\"name\": \"John\", \"surname\": \"Doe\"}\n+\n+\n+def test_response_model_no_annotation_return_same_model():\n+    response = client.get(\"/response_model-no_annotation-return_same_model\")\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\"name\": \"John\", \"surname\": \"Doe\"}\n+\n+\n+def test_response_model_no_annotation_return_exact_dict():\n+    response = client.get(\"/response_model-no_annotation-return_exact_dict\")\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\"name\": \"John\", \"surname\": \"Doe\"}\n+\n+\n+def test_response_model_no_annotation_return_invalid_dict():\n+    with pytest.raises(ValidationError):\n+        client.get(\"/response_model-no_annotation-return_invalid_dict\")\n+\n+\n+def test_response_model_no_annotation_return_invalid_model():\n+    with pytest.raises(ValidationError):\n+        client.get(\"/response_model-no_annotation-return_invalid_model\")\n+\n+\n+def test_response_model_no_annotation_return_dict_with_extra_data():\n+    response = client.get(\"/response_model-no_annotation-return_dict_with_extra_data\")\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\"name\": \"John\", \"surname\": \"Doe\"}\n+\n+\n+def test_response_model_no_annotation_return_submodel_with_extra_data():\n+    response = client.get(\n+        \"/response_model-no_annotation-return_submodel_with_extra_data\"\n+    )\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\"name\": \"John\", \"surname\": \"Doe\"}\n+\n+\n+def test_no_response_model_annotation_return_same_model():\n+    response = client.get(\"/no_response_model-annotation-return_same_model\")\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\"name\": \"John\", \"surname\": \"Doe\"}\n+\n+\n+def test_no_response_model_annotation_return_exact_dict():\n+    response = client.get(\"/no_response_model-annotation-return_exact_dict\")\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\"name\": \"John\", \"surname\": \"Doe\"}\n+\n+\n+def test_no_response_model_annotation_return_invalid_dict():\n+    with pytest.raises(ValidationError):\n+        client.get(\"/no_response_model-annotation-return_invalid_dict\")\n+\n+\n+def test_no_response_model_annotation_return_invalid_model():\n+    with pytest.raises(ValidationError):\n+        client.get(\"/no_response_model-annotation-return_invalid_model\")\n+\n+\n+def test_no_response_model_annotation_return_dict_with_extra_data():\n+    response = client.get(\"/no_response_model-annotation-return_dict_with_extra_data\")\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\"name\": \"John\", \"surname\": \"Doe\"}\n+\n+\n+def test_no_response_model_annotation_return_submodel_with_extra_data():\n+    response = client.get(\n+        \"/no_response_model-annotation-return_submodel_with_extra_data\"\n+    )\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\"name\": \"John\", \"surname\": \"Doe\"}\n+\n+\n+def test_response_model_none_annotation_return_same_model():\n+    response = client.get(\"/response_model_none-annotation-return_same_model\")\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\"name\": \"John\", \"surname\": \"Doe\"}\n+\n+\n+def test_response_model_none_annotation_return_exact_dict():\n+    response = client.get(\"/response_model_none-annotation-return_exact_dict\")\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\"name\": \"John\", \"surname\": \"Doe\"}\n+\n+\n+def test_response_model_none_annotation_return_invalid_dict():\n+    response = client.get(\"/response_model_none-annotation-return_invalid_dict\")\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\"name\": \"John\"}\n+\n+\n+def test_response_model_none_annotation_return_invalid_model():\n+    response = client.get(\"/response_model_none-annotation-return_invalid_model\")\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\"name\": \"Foo\", \"price\": 42.0}\n+\n+\n+def test_response_model_none_annotation_return_dict_with_extra_data():\n+    response = client.get(\"/response_model_none-annotation-return_dict_with_extra_data\")\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\n+        \"name\": \"John\",\n+        \"surname\": \"Doe\",\n+        \"password_hash\": \"secret\",\n+    }\n+\n+\n+def test_response_model_none_annotation_return_submodel_with_extra_data():\n+    response = client.get(\n+        \"/response_model_none-annotation-return_submodel_with_extra_data\"\n+    )\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\n+        \"name\": \"John\",\n+        \"surname\": \"Doe\",\n+        \"password_hash\": \"secret\",\n+    }\n+\n+\n+def test_response_model_model1_annotation_model2_return_same_model():\n+    response = client.get(\"/response_model_model1-annotation_model2-return_same_model\")\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\"name\": \"John\", \"surname\": \"Doe\"}\n+\n+\n+def test_response_model_model1_annotation_model2_return_exact_dict():\n+    response = client.get(\"/response_model_model1-annotation_model2-return_exact_dict\")\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\"name\": \"John\", \"surname\": \"Doe\"}\n+\n+\n+def test_response_model_model1_annotation_model2_return_invalid_dict():\n+    with pytest.raises(ValidationError):\n+        client.get(\"/response_model_model1-annotation_model2-return_invalid_dict\")\n+\n+\n+def test_response_model_model1_annotation_model2_return_invalid_model():\n+    with pytest.raises(ValidationError):\n+        client.get(\"/response_model_model1-annotation_model2-return_invalid_model\")\n+\n+\n+def test_response_model_model1_annotation_model2_return_dict_with_extra_data():\n+    response = client.get(\n+        \"/response_model_model1-annotation_model2-return_dict_with_extra_data\"\n+    )\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\"name\": \"John\", \"surname\": \"Doe\"}\n+\n+\n+def test_response_model_model1_annotation_model2_return_submodel_with_extra_data():\n+    response = client.get(\n+        \"/response_model_model1-annotation_model2-return_submodel_with_extra_data\"\n+    )\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\"name\": \"John\", \"surname\": \"Doe\"}\n+\n+\n+def test_response_model_filtering_model_annotation_submodel_return_submodel():\n+    response = client.get(\n+        \"/response_model_filtering_model-annotation_submodel-return_submodel\"\n+    )\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\"name\": \"John\", \"surname\": \"Doe\"}\n+\n+\n+def test_response_model_list_of_model_no_annotation():\n+    response = client.get(\"/response_model_list_of_model-no_annotation\")\n+    assert response.status_code == 200, response.text\n+    assert response.json() == [\n+        {\"name\": \"John\", \"surname\": \"Doe\"},\n+        {\"name\": \"Jane\", \"surname\": \"Does\"},\n+    ]\n+\n+\n+def test_no_response_model_annotation_list_of_model():\n+    response = client.get(\"/no_response_model-annotation_list_of_model\")\n+    assert response.status_code == 200, response.text\n+    assert response.json() == [\n+        {\"name\": \"John\", \"surname\": \"Doe\"},\n+        {\"name\": \"Jane\", \"surname\": \"Does\"},\n+    ]\n+\n+\n+def test_no_response_model_annotation_forward_ref_list_of_model():\n+    response = client.get(\"/no_response_model-annotation_forward_ref_list_of_model\")\n+    assert response.status_code == 200, response.text\n+    assert response.json() == [\n+        {\"name\": \"John\", \"surname\": \"Doe\"},\n+        {\"name\": \"Jane\", \"surname\": \"Does\"},\n+    ]\n+\n+\n+def test_response_model_union_no_annotation_return_model1():\n+    response = client.get(\"/response_model_union-no_annotation-return_model1\")\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\"name\": \"John\", \"surname\": \"Doe\"}\n+\n+\n+def test_response_model_union_no_annotation_return_model2():\n+    response = client.get(\"/response_model_union-no_annotation-return_model2\")\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\"name\": \"Foo\", \"price\": 42.0}\n+\n+\n+def test_no_response_model_annotation_union_return_model1():\n+    response = client.get(\"/no_response_model-annotation_union-return_model1\")\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\"name\": \"John\", \"surname\": \"Doe\"}\n+\n+\n+def test_no_response_model_annotation_union_return_model2():\n+    response = client.get(\"/no_response_model-annotation_union-return_model2\")\n+    assert response.status_code == 200, response.text\n+    assert response.json() == {\"name\": \"Foo\", \"price\": 42.0}\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
