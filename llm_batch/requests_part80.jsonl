{"custom_id": "requests#596ca83f0c66460deb82af07b13ce724b9f46474", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 5 | Lines Deleted: 7 | Files Changed: 1 | Hunks: 3 | Methods Changed: 1 | Complexity Δ (Sum/Max): -1/0 | Churn Δ: 12 | Churn Cumulative: 2926 | Contributors (this commit): 56 | Commits (past 90d): 10 | Contributors (cumulative): 56 | DMM Complexity: 1.0\n\nDIFF:\n@@ -593,7 +593,7 @@ class Session(SessionRedirectMixin):\n         return r\n \n     def merge_environment_settings(self, url, proxies, stream, verify, cert):\n-        \"\"\"Checks the environment and merges it with some settings.\"\"\"\n+        \"\"\"Check the environment and merge it with some settings.\"\"\"\n         # Gather clues from the surrounding environment.\n         if self.trust_env:\n             # Set environment's proxies.\n@@ -601,13 +601,11 @@ class Session(SessionRedirectMixin):\n             for (k, v) in env_proxies.items():\n                 proxies.setdefault(k, v)\n \n-            # Look for configuration.\n+            # Look for requests environment configuration and be compatible\n+            # with cURL.\n             if verify is True or verify is None:\n-                verify = os.environ.get('REQUESTS_CA_BUNDLE')\n-\n-            # Curl compatibility.\n-            if verify is True or verify is None:\n-                verify = os.environ.get('CURL_CA_BUNDLE')\n+                verify = (os.environ.get('REQUESTS_CA_BUNDLE') or\n+                          os.environ.get('CURL_CA_BUNDLE'))\n \n         # Merge all the kwargs.\n         proxies = merge_setting(proxies, self.proxies)\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#89cb408bb06d629f0932758abfafc9a17709cb82", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 2 | Lines Deleted: 2 | Files Changed: 1 | Hunks: 1 | Methods Changed: 0 | Complexity Δ (Sum/Max): 0/0 | Churn Δ: 4 | Churn Cumulative: 545 | Contributors (this commit): 10 | Commits (past 90d): 1 | Contributors (cumulative): 10 | DMM Complexity: None\n\nDIFF:\n@@ -42,8 +42,8 @@ is at <http://python-requests.org>.\n \"\"\"\n \n __title__ = 'requests'\n-__version__ = '2.3.0'\n-__build__ = 0x020300\n+__version__ = '2.4.0'\n+__build__ = 0x020400\n __author__ = 'Kenneth Reitz'\n __license__ = 'Apache 2.0'\n __copyright__ = 'Copyright 2014 Kenneth Reitz'\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#d33ce49aaa46c855458582f338a6e2039d428bee", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 2 | Lines Deleted: 1 | Files Changed: 1 | Hunks: 1 | Methods Changed: 1 | Complexity Δ (Sum/Max): 0/0 | Churn Δ: 3 | Churn Cumulative: 2172 | Contributors (this commit): 50 | Commits (past 90d): 1 | Contributors (cumulative): 50 | DMM Complexity: 1.0\n\nDIFF:\n@@ -554,7 +554,8 @@ def default_headers():\n     return CaseInsensitiveDict({\n         'User-Agent': default_user_agent(),\n         'Accept-Encoding': ', '.join(('gzip', 'deflate')),\n-        'Accept': '*/*'\n+        'Accept': '*/*',\n+        'Connection': 'keep-alive'\n     })\n \n \n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#d22b8d8e7e8fcb8d16efba6841977dc81ac2c935", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 1 | Lines Deleted: 0 | Files Changed: 1 | Hunks: 1 | Methods Changed: 0 | Complexity Δ (Sum/Max): 0/0 | Churn Δ: 1 | Churn Cumulative: 400 | Contributors (this commit): 14 | Commits (past 90d): 2 | Contributors (cumulative): 14 | DMM Complexity: None\n\nDIFF:\n@@ -57,6 +57,7 @@ setup(\n         'Programming Language :: Python :: 2.7',\n         'Programming Language :: Python :: 3',\n         'Programming Language :: Python :: 3.3',\n+        'Programming Language :: Python :: 3.4'\n \n     ),\n )\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#8f17741849edb5e7eba0356f90cb17e43c938a2f", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 32 | Lines Deleted: 6 | Files Changed: 4 | Hunks: 21 | Methods Changed: 14 | Complexity Δ (Sum/Max): 5/3 | Churn Δ: 38 | Churn Cumulative: 17950 | Contributors (this commit): 188 | Commits (past 90d): 38 | Contributors (cumulative): 301 | DMM Complexity: 0.5555555555555556\n\nDIFF:\n@@ -22,6 +22,7 @@ def request(method, url, **kwargs):\n     :param url: URL for the new :class:`Request` object.\n     :param params: (optional) Dictionary or bytes to be sent in the query string for the :class:`Request`.\n     :param data: (optional) Dictionary, bytes, or file-like object to send in the body of the :class:`Request`.\n+    :param json: (optional) json data to send in the body of the :class:`Request`.\n     :param headers: (optional) Dictionary of HTTP Headers to send with the :class:`Request`.\n     :param cookies: (optional) Dict or CookieJar object to send with the :class:`Request`.\n     :param files: (optional) Dictionary of 'name': file-like-objects (or {'name': ('filename', fileobj)}) for multipart encoding upload.\n@@ -77,15 +78,16 @@ def head(url, **kwargs):\n     return request('head', url, **kwargs)\n \n \n-def post(url, data=None, **kwargs):\n+def post(url, data=None, json=None, **kwargs):\n     \"\"\"Sends a POST request. Returns :class:`Response` object.\n \n     :param url: URL for the new :class:`Request` object.\n     :param data: (optional) Dictionary, bytes, or file-like object to send in the body of the :class:`Request`.\n+    :param json: (optional) json data to send in the body of the :class:`Request`.\n     :param \\*\\*kwargs: Optional arguments that ``request`` takes.\n     \"\"\"\n \n-    return request('post', url, data=data, **kwargs)\n+    return request('post', url, data=data, json=json, **kwargs)\n \n \n def put(url, data=None, **kwargs):\n\n@@ -190,6 +190,7 @@ class Request(RequestHooksMixin):\n     :param headers: dictionary of headers to send.\n     :param files: dictionary of {filename: fileobject} files to multipart upload.\n     :param data: the body to attach the request. If a dictionary is provided, form-encoding will take place.\n+    :param json: json for the body to attach the request.\n     :param params: dictionary of URL parameters to append to the URL.\n     :param auth: Auth handler or (user, pass) tuple.\n     :param cookies: dictionary or CookieJar of cookies to attach to this request.\n@@ -209,6 +210,7 @@ class Request(RequestHooksMixin):\n         headers=None,\n         files=None,\n         data=None,\n+        json=None,\n         params=None,\n         auth=None,\n         cookies=None,\n@@ -216,6 +218,7 @@ class Request(RequestHooksMixin):\n \n         # Default empty dicts for dict params.\n         data = [] if data is None else data\n+        json = [] if json is None else json\n         files = [] if files is None else files\n         headers = {} if headers is None else headers\n         params = {} if params is None else params\n@@ -230,6 +233,7 @@ class Request(RequestHooksMixin):\n         self.headers = headers\n         self.files = files\n         self.data = data\n+        self.json = json\n         self.params = params\n         self.auth = auth\n         self.cookies = cookies\n@@ -246,6 +250,7 @@ class Request(RequestHooksMixin):\n             headers=self.headers,\n             files=self.files,\n             data=self.data,\n+            json=self.json,\n             params=self.params,\n             auth=self.auth,\n             cookies=self.cookies,\n@@ -289,7 +294,7 @@ class PreparedRequest(RequestEncodingMixin, RequestHooksMixin):\n         self.hooks = default_hooks()\n \n     def prepare(self, method=None, url=None, headers=None, files=None,\n-                data=None, params=None, auth=None, cookies=None, hooks=None):\n+                data=None, json=None, params=None, auth=None, cookies=None, hooks=None):\n         \"\"\"Prepares the entire request with the given parameters.\"\"\"\n \n         self.prepare_method(method)\n@@ -397,7 +402,7 @@ class PreparedRequest(RequestEncodingMixin, RequestHooksMixin):\n         else:\n             self.headers = CaseInsensitiveDict()\n \n-    def prepare_body(self, data, files):\n+    def prepare_body(self, data, files, _json=None):\n         \"\"\"Prepares the given HTTP body data.\"\"\"\n \n         # Check if file, fo, generator, iterator.\n@@ -408,6 +413,10 @@ class PreparedRequest(RequestEncodingMixin, RequestHooksMixin):\n         content_type = None\n         length = None\n \n+        if _json is not None:\n+            content_type = 'application/json'\n+            data = json.dumps(_json)\n+\n         is_stream = all([\n             hasattr(data, '__iter__'),\n             not isinstance(data, (basestring, list, tuple, dict))\n@@ -435,6 +444,7 @@ class PreparedRequest(RequestEncodingMixin, RequestHooksMixin):\n             else:\n                 if data:\n                     body = self._encode_params(data)\n+                    if not _json:\n                         if isinstance(data, basestring) or hasattr(data, 'read'):\n                             content_type = None\n                         else:\n\n@@ -365,6 +365,7 @@ class Session(SessionRedirectMixin):\n             url=request.url,\n             files=request.files,\n             data=request.data,\n+            json=request.json,\n             headers=merge_setting(request.headers, self.headers, dict_class=CaseInsensitiveDict),\n             params=merge_setting(request.params, self.params),\n             auth=merge_setting(auth, self.auth),\n@@ -376,6 +377,7 @@ class Session(SessionRedirectMixin):\n     def request(self, method, url,\n         params=None,\n         data=None,\n+        json=None,\n         headers=None,\n         cookies=None,\n         files=None,\n@@ -396,6 +398,8 @@ class Session(SessionRedirectMixin):\n             string for the :class:`Request`.\n         :param data: (optional) Dictionary or bytes to send in the body of the\n             :class:`Request`.\n+        :param json: (optional) json to send in the body of the\n+            :class:`Request`.\n         :param headers: (optional) Dictionary of HTTP Headers to send with the\n             :class:`Request`.\n         :param cookies: (optional) Dict or CookieJar object to send with the\n@@ -426,6 +430,7 @@ class Session(SessionRedirectMixin):\n             headers = headers,\n             files = files,\n             data = data or {},\n+            json = json or {},\n             params = params or {},\n             auth = auth,\n             cookies = cookies,\n@@ -479,15 +484,16 @@ class Session(SessionRedirectMixin):\n         kwargs.setdefault('allow_redirects', False)\n         return self.request('HEAD', url, **kwargs)\n \n-    def post(self, url, data=None, **kwargs):\n+    def post(self, url, data=None, json=None, **kwargs):\n         \"\"\"Sends a POST request. Returns :class:`Response` object.\n \n         :param url: URL for the new :class:`Request` object.\n         :param data: (optional) Dictionary, bytes, or file-like object to send in the body of the :class:`Request`.\n+        :param json: (optional) json to send in the body of the :class:`Request`.\n         :param \\*\\*kwargs: Optional arguments that ``request`` takes.\n         \"\"\"\n \n-        return self.request('POST', url, data=data, **kwargs)\n+        return self.request('POST', url, data=data, json=json, **kwargs)\n \n     def put(self, url, data=None, **kwargs):\n         \"\"\"Sends a PUT request. Returns :class:`Response` object.\n\n@@ -986,6 +986,14 @@ class RequestsTestCase(unittest.TestCase):\n             assert item.history == total[0:i]\n             i=i+1\n \n+    def test_json_param_post_content_type_works(self):\n+        r = requests.post(\n+            httpbin('post'),\n+            json={'life': 42}\n+        )\n+        assert r.status_code == 200\n+        assert 'application/json' in r.headers['Content-Type']\n+\n \n class TestContentEncodingDetection(unittest.TestCase):\n \n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#b34a496649667b9324caa634cb17e726e0cce1a5", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 4 | Lines Deleted: 3 | Files Changed: 2 | Hunks: 3 | Methods Changed: 3 | Complexity Δ (Sum/Max): 1/1 | Churn Δ: 7 | Churn Cumulative: 13924 | Contributors (this commit): 166 | Commits (past 90d): 20 | Contributors (cumulative): 214 | DMM Complexity: None\n\nDIFF:\n@@ -301,7 +301,7 @@ class PreparedRequest(RequestEncodingMixin, RequestHooksMixin):\n         self.prepare_url(url, params)\n         self.prepare_headers(headers)\n         self.prepare_cookies(cookies)\n-        self.prepare_body(data, files)\n+        self.prepare_body(data, files, json)\n         self.prepare_auth(auth, url)\n         # Note that prepare_auth must be last to enable authentication schemes\n         # such as OAuth to work on a fully prepared request.\n@@ -442,7 +442,7 @@ class PreparedRequest(RequestEncodingMixin, RequestHooksMixin):\n             if files:\n                 (body, content_type) = self._encode_files(files, data)\n             else:\n-                if data:\n+                if data and not _json:\n                     body = self._encode_params(data)\n                     if not _json:\n                         if isinstance(data, basestring) or hasattr(data, 'read'):\n\n@@ -992,7 +992,8 @@ class RequestsTestCase(unittest.TestCase):\n             json={'life': 42}\n         )\n         assert r.status_code == 200\n-        assert 'application/json' in r.headers['Content-Type']\n+        assert 'application/json' in r.request.headers['Content-Type']\n+        #assert {'life': 42} == r.json()['json']\n \n \n class TestContentEncodingDetection(unittest.TestCase):\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#402f3b4993fe8d0626fcffcbfc30caf671b65df3", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 1 | Lines Deleted: 2 | Files Changed: 1 | Hunks: 2 | Methods Changed: 1 | Complexity Δ (Sum/Max): -1/0 | Churn Δ: 3 | Churn Cumulative: 9158 | Contributors (this commit): 132 | Commits (past 90d): 8 | Contributors (cumulative): 132 | DMM Complexity: 1.0\n\nDIFF:\n@@ -442,9 +442,8 @@ class PreparedRequest(RequestEncodingMixin, RequestHooksMixin):\n             if files:\n                 (body, content_type) = self._encode_files(files, data)\n             else:\n-                if data and not _json:\n+                if data and _json is None:\n                     body = self._encode_params(data)\n-                    if not _json:\n                     if isinstance(data, basestring) or hasattr(data, 'read'):\n                         content_type = None\n                     else:\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#0713e09526d3ed2d2fe2516fa6d35727c557024f", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 1 | Lines Deleted: 1 | Files Changed: 1 | Hunks: 1 | Methods Changed: 1 | Complexity Δ (Sum/Max): 0/0 | Churn Δ: 2 | Churn Cumulative: 4771 | Contributors (this commit): 82 | Commits (past 90d): 14 | Contributors (cumulative): 82 | DMM Complexity: 1.0\n\nDIFF:\n@@ -993,7 +993,7 @@ class RequestsTestCase(unittest.TestCase):\n         )\n         assert r.status_code == 200\n         assert 'application/json' in r.request.headers['Content-Type']\n-        #assert {'life': 42} == r.json()['json']\n+        assert {'life': 42} == r.json()['json']\n \n \n class TestContentEncodingDetection(unittest.TestCase):\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#dfa41afd43a15222eb7a2db35feadd36dba4b445", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 22 | Lines Deleted: 12 | Files Changed: 4 | Hunks: 9 | Methods Changed: 3 | Complexity Δ (Sum/Max): -1/0 | Churn Δ: 34 | Churn Cumulative: 5074 | Contributors (this commit): 87 | Commits (past 90d): 20 | Contributors (cumulative): 128 | DMM Complexity: None\n\nDIFF:\n@@ -316,8 +316,10 @@ class HTTPAdapter(BaseAdapter):\n \n         :param request: The :class:`PreparedRequest <PreparedRequest>` being sent.\n         :param stream: (optional) Whether to stream the request content.\n-        :param timeout: (optional) The timeout on the request.\n-        :type timeout: float or tuple (connect timeout, read timeout), eg (3.1, 20)\n+        :param timeout: (optional) How long to wait for the server to send\n+            data before giving up, as a float, or a (`connect timeout, read\n+            timeout <user/advanced.html#timeouts>`_) tuple.\n+        :type timeout: float or tuple\n         :param verify: (optional) Whether to verify SSL certificates.\n         :param cert: (optional) Any user-provided SSL certificate to be trusted.\n         :param proxies: (optional) The proxies dictionary to apply to the request.\n\n@@ -24,10 +24,14 @@ def request(method, url, **kwargs):\n     :param data: (optional) Dictionary, bytes, or file-like object to send in the body of the :class:`Request`.\n     :param headers: (optional) Dictionary of HTTP Headers to send with the :class:`Request`.\n     :param cookies: (optional) Dict or CookieJar object to send with the :class:`Request`.\n-    :param files: (optional) Dictionary of 'name': file-like-objects (or {'name': ('filename', fileobj)}) for multipart encoding upload.\n+    :param files: (optional) Dictionary of ``'name': file-like-objects`` (or ``{'name': ('filename', fileobj)}``) for multipart encoding upload.\n     :param auth: (optional) Auth tuple to enable Basic/Digest/Custom HTTP Auth.\n-    :param timeout: (optional) Float describing the timeout of the request in seconds.\n+    :param timeout: (optional) How long to wait for the server to send data\n+        before giving up, as a float, or a (`connect timeout, read timeout\n+        <user/advanced.html#timeouts>`_) tuple.\n+    :type timeout: float or tuple\n     :param allow_redirects: (optional) Boolean. Set to True if POST/PUT/DELETE redirect following is allowed.\n+    :type allow_redirects: bool\n     :param proxies: (optional) Dictionary mapping protocol to the URL of the proxy.\n     :param verify: (optional) if ``True``, the SSL cert will be verified. A CA_BUNDLE path can also be provided.\n     :param stream: (optional) if ``False``, the response content will be immediately downloaded.\n\n@@ -46,15 +46,16 @@ class SSLError(ConnectionError):\n class Timeout(RequestException):\n     \"\"\"The request timed out.\n \n-    Catching this error will catch both :exc:`ConnectTimeout` and\n-    :exc:`ReadTimeout` errors.\n+    Catching this error will catch both\n+    :exc:`~requests.exceptions.ConnectTimeout` and\n+    :exc:`~requests.exceptions.ReadTimeout` errors.\n     \"\"\"\n \n \n class ConnectTimeout(ConnectionError, Timeout):\n-    \"\"\"The request timed out while trying to connect to the server.\n+    \"\"\"The request timed out while trying to connect to the remote server.\n \n-    Requests that produce this error are safe to retry\n+    Requests that produced this error are safe to retry.\n     \"\"\"\n \n \n\n@@ -400,13 +400,16 @@ class Session(SessionRedirectMixin):\n             :class:`Request`.\n         :param cookies: (optional) Dict or CookieJar object to send with the\n             :class:`Request`.\n-        :param files: (optional) Dictionary of 'filename': file-like-objects\n+        :param files: (optional) Dictionary of ``'filename': file-like-objects``\n             for multipart encoding upload.\n         :param auth: (optional) Auth tuple or callable to enable\n             Basic/Digest/Custom HTTP Auth.\n-        :param timeout: (optional) Float describing the timeout of the\n-            request in seconds.\n-        :param allow_redirects: (optional) Boolean. Set to True by default.\n+        :param timeout: (optional) How long to wait for the server to send\n+            data before giving up, as a float, or a (`connect timeout, read\n+            timeout <user/advanced.html#timeouts>`_) tuple.\n+        :type timeout: float or tuple\n+        :param allow_redirects: (optional) Set to True by default.\n+        :type allow_redirects: bool\n         :param proxies: (optional) Dictionary mapping protocol to the URL of\n             the proxy.\n         :param stream: (optional) whether to immediately download the response\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#59f5a1089a05bb768e1c86804cc8a6d023c9cb43", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 1 | Lines Deleted: 1 | Files Changed: 1 | Hunks: 1 | Methods Changed: 1 | Complexity Δ (Sum/Max): 0/0 | Churn Δ: 2 | Churn Cumulative: 2174 | Contributors (this commit): 51 | Commits (past 90d): 2 | Contributors (cumulative): 51 | DMM Complexity: None\n\nDIFF:\n@@ -555,7 +555,7 @@ def default_headers():\n         'User-Agent': default_user_agent(),\n         'Accept-Encoding': ', '.join(('gzip', 'deflate')),\n         'Accept': '*/*',\n-        'Connection': 'keep-alive'\n+        'Connection': 'keep-alive',\n     })\n \n \n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#da122231e4dab3cc3f9726b4e8edf70bb649dd5d", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 4 | Lines Deleted: 0 | Files Changed: 1 | Hunks: 2 | Methods Changed: 1 | Complexity Δ (Sum/Max): 1/1 | Churn Δ: 4 | Churn Cumulative: 861 | Contributors (this commit): 25 | Commits (past 90d): 4 | Contributors (cumulative): 25 | DMM Complexity: 0.0\n\nDIFF:\n@@ -23,6 +23,7 @@ from .packages.urllib3.exceptions import ConnectTimeoutError\n from .packages.urllib3.exceptions import HTTPError as _HTTPError\n from .packages.urllib3.exceptions import MaxRetryError\n from .packages.urllib3.exceptions import ProxyError as _ProxyError\n+from .packages.urllib3.exceptions import ProtocolError\n from .packages.urllib3.exceptions import ReadTimeoutError\n from .packages.urllib3.exceptions import SSLError as _SSLError\n from .cookies import extract_cookies_to_jar\n@@ -403,6 +404,9 @@ class HTTPAdapter(BaseAdapter):\n         except socket.error as sockerr:\n             raise ConnectionError(sockerr, request=request)\n \n+        except ProtocolError as e:\n+            raise ConnectionError(e, request=request)\n+\n         except MaxRetryError as e:\n             if isinstance(e.reason, ConnectTimeoutError):\n                 raise ConnectTimeout(e, request=request)\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#2c76122a48c6a4b513930fed56c0aea5362d6c9c", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 5 | Lines Deleted: 0 | Files Changed: 1 | Hunks: 1 | Methods Changed: 1 | Complexity Δ (Sum/Max): 0/0 | Churn Δ: 5 | Churn Cumulative: 4776 | Contributors (this commit): 82 | Commits (past 90d): 15 | Contributors (cumulative): 82 | DMM Complexity: 1.0\n\nDIFF:\n@@ -286,6 +286,11 @@ class RequestsTestCase(unittest.TestCase):\n         r = s.get(url)\n         assert r.status_code == 200\n \n+    def test_connection_error(self):\n+        \"\"\"Connecting to an unknown domain should raise a ConnectionError\"\"\"\n+        with pytest.raises(ConnectionError):\n+            requests.get(\"http://fooobarbangbazbing.httpbin.org\")\n+\n     def test_basicauth_with_netrc(self):\n         auth = ('user', 'pass')\n         wrong_auth = ('wronguser', 'wrongpass')\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#c8098670357f2954ce4db2eb1fa9c7483c5f63d0", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 3 | Lines Deleted: 0 | Files Changed: 1 | Hunks: 1 | Methods Changed: 0 | Complexity Δ (Sum/Max): 0/0 | Churn Δ: 3 | Churn Cumulative: 403 | Contributors (this commit): 15 | Commits (past 90d): 3 | Contributors (cumulative): 15 | DMM Complexity: None\n\nDIFF:\n@@ -60,4 +60,7 @@ setup(\n         'Programming Language :: Python :: 3.4'\n \n     ),\n+    extras_require={\n+        'betterssl': ['pyOpenSSL', 'ndg-httpsclient', 'pyasn1'],\n+    },\n )\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#ce7957c085d912bd1b225460d159b19eaf3e6510", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 3 | Lines Deleted: 0 | Files Changed: 1 | Hunks: 1 | Methods Changed: 1 | Complexity Δ (Sum/Max): 0/0 | Churn Δ: 3 | Churn Cumulative: 4779 | Contributors (this commit): 83 | Commits (past 90d): 16 | Contributors (cumulative): 83 | DMM Complexity: 1.0\n\nDIFF:\n@@ -291,6 +291,9 @@ class RequestsTestCase(unittest.TestCase):\n         with pytest.raises(ConnectionError):\n             requests.get(\"http://fooobarbangbazbing.httpbin.org\")\n \n+        with pytest.raises(ConnectionError):\n+            requests.get(\"http://httpbin.org:1\")\n+\n     def test_basicauth_with_netrc(self):\n         auth = ('user', 'pass')\n         wrong_auth = ('wronguser', 'wrongpass')\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#226b5c7b0aafc3cb744eb79a666d9a1bd0803a47", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 4 | Lines Deleted: 2 | Files Changed: 1 | Hunks: 3 | Methods Changed: 0 | Complexity Δ (Sum/Max): 0/0 | Churn Δ: 6 | Churn Cumulative: 409 | Contributors (this commit): 16 | Commits (past 90d): 4 | Contributors (cumulative): 16 | DMM Complexity: None\n\nDIFF:\n@@ -5,6 +5,8 @@ import sys\n \n import requests\n \n+from codecs import open\n+\n try:\n     from setuptools import setup\n except ImportError:\n@@ -27,9 +29,9 @@ packages = [\n \n requires = ['certifi']\n \n-with open('README.rst') as f:\n+with open('README.rst', 'r', 'utf-8') as f:\n     readme = f.read()\n-with open('HISTORY.rst') as f:\n+with open('HISTORY.rst', 'r', 'utf-8') as f:\n     history = f.read()\n \n setup(\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#9354855648cedbec3a91a9391e067f56e8414814", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 2 | Lines Deleted: 5 | Files Changed: 1 | Hunks: 1 | Methods Changed: 1 | Complexity Δ (Sum/Max): -1/0 | Churn Δ: 7 | Churn Cumulative: 868 | Contributors (this commit): 25 | Commits (past 90d): 5 | Contributors (cumulative): 25 | DMM Complexity: 1.0\n\nDIFF:\n@@ -401,11 +401,8 @@ class HTTPAdapter(BaseAdapter):\n                     # All is well, return the connection to the pool.\n                     conn._put_conn(low_conn)\n \n-        except socket.error as sockerr:\n-            raise ConnectionError(sockerr, request=request)\n-\n-        except ProtocolError as e:\n-            raise ConnectionError(e, request=request)\n+        except (ProtocolError, socket.error) as err:\n+            raise ConnectionError(err, request=request)\n \n         except MaxRetryError as e:\n             if isinstance(e.reason, ConnectTimeoutError):\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#958845ae35cee1fa15acc14b5691d787e8bed9bb", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 1 | Lines Deleted: 1 | Files Changed: 1 | Hunks: 1 | Methods Changed: 0 | Complexity Δ (Sum/Max): 0/0 | Churn Δ: 2 | Churn Cumulative: 411 | Contributors (this commit): 16 | Commits (past 90d): 5 | Contributors (cumulative): 16 | DMM Complexity: None\n\nDIFF:\n@@ -61,6 +61,6 @@ setup(\n \n     ),\n     extras_require={\n-        'betterssl': ['pyOpenSSL', 'ndg-httpsclient', 'pyasn1'],\n+        'security': ['pyOpenSSL', 'ndg-httpsclient', 'pyasn1'],\n     },\n )\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#a77054f90fd3947db03838d3f244ee802c388314", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 1 | Lines Deleted: 1 | Files Changed: 1 | Hunks: 1 | Methods Changed: 0 | Complexity Δ (Sum/Max): 0/0 | Churn Δ: 2 | Churn Cumulative: 413 | Contributors (this commit): 16 | Commits (past 90d): 6 | Contributors (cumulative): 16 | DMM Complexity: None\n\nDIFF:\n@@ -25,7 +25,7 @@ packages = [\n     'requests.packages.urllib3.packages.ssl_match_hostname',\n ]\n \n-requires = ['certifi']\n+requires = []\n \n with open('README.rst') as f:\n     readme = f.read()\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#27c83f71770a2a64d56b7d53f9cc67f53cf70ccd", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 2 | Lines Deleted: 2 | Files Changed: 1 | Hunks: 1 | Methods Changed: 1 | Complexity Δ (Sum/Max): 1/1 | Churn Δ: 4 | Churn Cumulative: 2951 | Contributors (this commit): 58 | Commits (past 90d): 12 | Contributors (cumulative): 58 | DMM Complexity: None\n\nDIFF:\n@@ -134,8 +134,8 @@ class SessionRedirectMixin(object):\n                 url = requote_uri(url)\n \n             prepared_request.url = to_native_string(url)\n-            # cache the url\n-            if resp.is_permanent_redirect:\n+            # Cache the url, unless it redirects to itself.\n+            if resp.is_permanent_redirect and req.url != prepared_request.url:\n                 self.redirect_cache[req.url] = prepared_request.url\n \n             # http://tools.ietf.org/html/rfc7231#section-6.4.4\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#dff383ce8f7a7f1c348c1cb5ea970a59fbe48527", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 2 | Lines Deleted: 2 | Files Changed: 1 | Hunks: 1 | Methods Changed: 0 | Complexity Δ (Sum/Max): 0/0 | Churn Δ: 4 | Churn Cumulative: 549 | Contributors (this commit): 10 | Commits (past 90d): 2 | Contributors (cumulative): 10 | DMM Complexity: None\n\nDIFF:\n@@ -42,8 +42,8 @@ is at <http://python-requests.org>.\n \"\"\"\n \n __title__ = 'requests'\n-__version__ = '2.4.0'\n-__build__ = 0x020400\n+__version__ = '2.4.1'\n+__build__ = 0x020401\n __author__ = 'Kenneth Reitz'\n __license__ = 'Apache 2.0'\n __copyright__ = 'Copyright 2014 Kenneth Reitz'\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#d3566ee1b053b6f24c4bf657ca36e6cb4698a44f", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 9 | Lines Deleted: 2 | Files Changed: 1 | Hunks: 2 | Methods Changed: 1 | Complexity Δ (Sum/Max): 0/0 | Churn Δ: 11 | Churn Cumulative: 4790 | Contributors (this commit): 84 | Commits (past 90d): 14 | Contributors (cumulative): 84 | DMM Complexity: 1.0\n\nDIFF:\n@@ -18,8 +18,9 @@ from requests.auth import HTTPDigestAuth, _basic_auth_str\n from requests.compat import (\n     Morsel, cookielib, getproxies, str, urljoin, urlparse, is_py3, builtin_str)\n from requests.cookies import cookiejar_from_dict, morsel_to_cookie\n-from requests.exceptions import (InvalidURL, MissingSchema, ConnectTimeout,\n-                                 ReadTimeout, ConnectionError, Timeout)\n+from requests.exceptions import (ConnectionError, ConnectTimeout,\n+                                 InvalidSchema, InvalidURL, MissingSchema,\n+                                 ReadTimeout, Timeout)\n from requests.models import PreparedRequest\n from requests.structures import CaseInsensitiveDict\n from requests.sessions import SessionRedirectMixin\n@@ -78,6 +79,12 @@ class RequestsTestCase(unittest.TestCase):\n     def test_invalid_url(self):\n         with pytest.raises(MissingSchema):\n             requests.get('hiwpefhipowhefopw')\n+        with pytest.raises(InvalidSchema):\n+            requests.get('localhost:3128')\n+        with pytest.raises(InvalidSchema):\n+            requests.get('localhost.localdomain:3128/')\n+        with pytest.raises(InvalidSchema):\n+            requests.get('10.122.1.1:3128/')\n         with pytest.raises(InvalidURL):\n             requests.get('http://')\n \n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#bff8b91638586a8269f79f1bac6e82921702e5b3", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 4 | Lines Deleted: 2 | Files Changed: 2 | Hunks: 2 | Methods Changed: 3 | Complexity Δ (Sum/Max): -3/0 | Churn Δ: 6 | Churn Cumulative: 13954 | Contributors (this commit): 168 | Commits (past 90d): 21 | Contributors (cumulative): 217 | DMM Complexity: None\n\nDIFF:\n@@ -334,7 +334,9 @@ class PreparedRequest(RequestEncodingMixin, RequestHooksMixin):\n         except UnicodeDecodeError:\n             pass\n \n-        # Don't do any URL preparation for oddball schemes\n+        # Don't do any URL preparation for non-HTTP schemes like `mailto`,\n+        # `data` etc to work around exceptions from `url_parse`, which\n+        # handles RFC 3986 only.\n         if ':' in url and not url.lower().startswith('http'):\n             self.url = url\n             return\n\n@@ -922,7 +922,7 @@ class RequestsTestCase(unittest.TestCase):\n \n         assert p.headers['Content-Length'] == length\n \n-    def test_oddball_schemes_dont_check_URLs(self):\n+    def test_nonhttp_schemes_dont_check_URLs(self):\n         test_urls = (\n             'data:image/gif;base64,R0lGODlhAQABAHAAACH5BAUAAAAALAAAAAABAAEAAAICRAEAOw==',\n             'file:///etc/passwd',\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#fdf932c61c7ff77d494a4a413cc5fbdb71328ac7", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 4 | Lines Deleted: 0 | Files Changed: 1 | Hunks: 1 | Methods Changed: 1 | Complexity Δ (Sum/Max): 2/2 | Churn Δ: 4 | Churn Cumulative: 9166 | Contributors (this commit): 134 | Commits (past 90d): 7 | Contributors (cumulative): 134 | DMM Complexity: 1.0\n\nDIFF:\n@@ -655,6 +655,10 @@ class Response(object):\n \n             self._content_consumed = True\n \n+        if self._content_consumed and isinstance(self._content, bool):\n+            raise RuntimeError(\n+                        'The content for this response was already consumed')\n+        else:\n             # simulate reading small chunks of the content\n             reused_chunks = iter_slices(self._content, chunk_size)\n \n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#d6470870d08828c1d332ae446d5288eaab55d1f1", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 0 | Lines Deleted: 1 | Files Changed: 1 | Hunks: 1 | Methods Changed: 1 | Complexity Δ (Sum/Max): 0/0 | Churn Δ: 1 | Churn Cumulative: 9167 | Contributors (this commit): 134 | Commits (past 90d): 8 | Contributors (cumulative): 134 | DMM Complexity: 0.0\n\nDIFF:\n@@ -658,7 +658,6 @@ class Response(object):\n         if self._content_consumed and isinstance(self._content, bool):\n             raise RuntimeError(\n                         'The content for this response was already consumed')\n-        else:\n         # simulate reading small chunks of the content\n         reused_chunks = iter_slices(self._content, chunk_size)\n \n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#58e0a6f4a020db660119f1c9459ab37ba55b92d4", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 3 | Lines Deleted: 0 | Files Changed: 1 | Hunks: 1 | Methods Changed: 0 | Complexity Δ (Sum/Max): 0/0 | Churn Δ: 3 | Churn Cumulative: 168 | Contributors (this commit): 16 | Commits (past 90d): 4 | Contributors (cumulative): 16 | DMM Complexity: None\n\nDIFF:\n@@ -89,3 +89,6 @@ class ChunkedEncodingError(RequestException):\n \n class ContentDecodingError(RequestException, BaseHTTPError):\n     \"\"\"Failed to decode response content\"\"\"\n+\n+class StreamConsumedError(RequestException):\n+    \"\"\"The content for this response was already consumed\"\"\"\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#6e5f7bb9d397ade498ee22d9785863ef1b8ad946", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 3 | Lines Deleted: 3 | Files Changed: 1 | Hunks: 2 | Methods Changed: 1 | Complexity Δ (Sum/Max): 0/0 | Churn Δ: 6 | Churn Cumulative: 9173 | Contributors (this commit): 134 | Commits (past 90d): 9 | Contributors (cumulative): 134 | DMM Complexity: 0.0\n\nDIFF:\n@@ -23,7 +23,8 @@ from .packages.urllib3.exceptions import (\n     DecodeError, ReadTimeoutError, ProtocolError)\n from .exceptions import (\n     HTTPError, RequestException, MissingSchema, InvalidURL, \n-    ChunkedEncodingError, ContentDecodingError, ConnectionError)\n+    ChunkedEncodingError, ContentDecodingError, ConnectionError, \n+    StreamConsumedError)\n from .utils import (\n     guess_filename, get_auth_from_url, requote_uri,\n     stream_decode_response_unicode, to_key_val_list, parse_header_links,\n@@ -656,8 +657,7 @@ class Response(object):\n             self._content_consumed = True\n \n         if self._content_consumed and isinstance(self._content, bool):\n-            raise RuntimeError(\n-                        'The content for this response was already consumed')\n+            raise StreamConsumedError()\n         # simulate reading small chunks of the content\n         reused_chunks = iter_slices(self._content, chunk_size)\n \n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#64ba451049c614eb14d336c2e7989ffaa81b2bb5", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 1 | Lines Deleted: 1 | Files Changed: 1 | Hunks: 1 | Methods Changed: 0 | Complexity Δ (Sum/Max): 0/0 | Churn Δ: 2 | Churn Cumulative: 170 | Contributors (this commit): 16 | Commits (past 90d): 5 | Contributors (cumulative): 16 | DMM Complexity: None\n\nDIFF:\n@@ -90,5 +90,5 @@ class ChunkedEncodingError(RequestException):\n class ContentDecodingError(RequestException, BaseHTTPError):\n     \"\"\"Failed to decode response content\"\"\"\n \n-class StreamConsumedError(RequestException):\n+class StreamConsumedError(RequestException, TypeError):\n     \"\"\"The content for this response was already consumed\"\"\"\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#ac44b482971d93cf5e7d4985a0b3fff52b3d2059", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 6 | Lines Deleted: 1 | Files Changed: 1 | Hunks: 2 | Methods Changed: 1 | Complexity Δ (Sum/Max): 1/1 | Churn Δ: 7 | Churn Cumulative: 2958 | Contributors (this commit): 58 | Commits (past 90d): 11 | Contributors (cumulative): 58 | DMM Complexity: 0.0\n\nDIFF:\n@@ -535,8 +535,13 @@ class Session(SessionRedirectMixin):\n         if not isinstance(request, PreparedRequest):\n             raise ValueError('You can only send PreparedRequests.')\n \n+        checked_urls = set()\n         while request.url in self.redirect_cache:\n-            request.url = self.redirect_cache.get(request.url)\n+            checked_urls.add(request.url)\n+            new_url = self.redirect_cache.get(request.url)\n+            if new_url in checked_urls:\n+                break\n+            request.url = new_url\n \n         # Set up variables needed for resolve_redirects and dispatching of hooks\n         allow_redirects = kwargs.pop('allow_redirects', True)\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#6e1db21733214e4d6707b0bc91b80499d4e946db", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 17 | Lines Deleted: 2 | Files Changed: 2 | Hunks: 3 | Methods Changed: 2 | Complexity Δ (Sum/Max): 2/2 | Churn Δ: 19 | Churn Cumulative: 3061 | Contributors (this commit): 72 | Commits (past 90d): 9 | Contributors (cumulative): 78 | DMM Complexity: 1.0\n\nDIFF:\n@@ -17,7 +17,7 @@ from .packages.urllib3.response import HTTPResponse\n from .packages.urllib3.util import Timeout as TimeoutSauce\n from .compat import urlparse, basestring, urldefrag\n from .utils import (DEFAULT_CA_BUNDLE_PATH, get_encoding_from_headers,\n-                    prepend_scheme_if_needed, get_auth_from_url)\n+                    prepend_scheme_if_needed, get_auth_from_url, urldefragauth)\n from .structures import CaseInsensitiveDict\n from .packages.urllib3.exceptions import ConnectTimeoutError\n from .packages.urllib3.exceptions import HTTPError as _HTTPError\n@@ -270,7 +270,7 @@ class HTTPAdapter(BaseAdapter):\n         proxy = proxies.get(scheme)\n \n         if proxy and scheme != 'https':\n-            url, _ = urldefrag(request.url)\n+            url = urldefragauth(request.url)\n         else:\n             url = request.path_url\n \n\n@@ -672,3 +672,18 @@ def to_native_string(string, encoding='ascii'):\n             out = string.decode(encoding)\n \n     return out\n+\n+\n+def urldefragauth(url):\n+    \"\"\"\n+    Given a url remove the fragment and the authentication part\n+    \"\"\"\n+    scheme, netloc, path, params, query, fragment = urlparse(url)\n+\n+    # see func:`prepend_scheme_if_needed`\n+    if not netloc:\n+        netloc, path = path, netloc\n+\n+    netloc = netloc.rsplit('@', 1)[-1]\n+\n+    return urlunparse((scheme, netloc, path, params, query, ''))\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#cd5eb629616012fcfa2835a633e04cdc47c33ec9", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 1 | Lines Deleted: 1 | Files Changed: 1 | Hunks: 1 | Methods Changed: 0 | Complexity Δ (Sum/Max): 0/0 | Churn Δ: 2 | Churn Cumulative: 874 | Contributors (this commit): 26 | Commits (past 90d): 7 | Contributors (cumulative): 26 | DMM Complexity: None\n\nDIFF:\n@@ -15,7 +15,7 @@ from .packages.urllib3 import Retry\n from .packages.urllib3.poolmanager import PoolManager, proxy_from_url\n from .packages.urllib3.response import HTTPResponse\n from .packages.urllib3.util import Timeout as TimeoutSauce\n-from .compat import urlparse, basestring, urldefrag\n+from .compat import urlparse, basestring\n from .utils import (DEFAULT_CA_BUNDLE_PATH, get_encoding_from_headers,\n                     prepend_scheme_if_needed, get_auth_from_url, urldefragauth)\n from .structures import CaseInsensitiveDict\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#c28da22e9c42e22b303bb07da434ce65e10c0cb2", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 9 | Lines Deleted: 0 | Files Changed: 1 | Hunks: 2 | Methods Changed: 2 | Complexity Δ (Sum/Max): 2/2 | Churn Δ: 9 | Churn Cumulative: 1234 | Contributors (this commit): 31 | Commits (past 90d): 1 | Contributors (cumulative): 31 | DMM Complexity: 1.0\n\nDIFF:\n@@ -150,6 +150,14 @@ class HTTPDigestAuth(AuthBase):\n \n         return 'Digest %s' % (base)\n \n+    def handle_302(self, r, **kwargs):\n+        \"\"\"Reset num_401_calls counter on redirects.\"\"\"\n+        try:\n+            delattr(self, 'num_401_calls')\n+        except AttributeError:\n+            pass\n+        return r\n+\n     def handle_401(self, r, **kwargs):\n         \"\"\"Takes the given response and tries digest-auth, if needed.\"\"\"\n \n@@ -194,4 +202,5 @@ class HTTPDigestAuth(AuthBase):\n         except AttributeError:\n             pass\n         r.register_hook('response', self.handle_401)\n+        r.register_hook('response', self.handle_302)\n         return r\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
{"custom_id": "requests#a68d1b4517395e4845fa8405f043f8aa3110f83c", "method": "POST", "url": "/v1/chat/completions", "body": {"model": "gpt-4o", "messages": [{"role": "user", "content": "You are a senior reviewer.\n\nCommit Summary:\nLines Added: 13 | Lines Deleted: 6 | Files Changed: 2 | Hunks: 3 | Methods Changed: 2 | Complexity Δ (Sum/Max): -1/1 | Churn Δ: 19 | Churn Cumulative: 13984 | Contributors (this commit): 170 | Commits (past 90d): 26 | Contributors (cumulative): 220 | DMM Complexity: 1.0\n\nDIFF:\n@@ -326,13 +326,14 @@ class PreparedRequest(RequestEncodingMixin, RequestHooksMixin):\n     def prepare_url(self, url, params):\n         \"\"\"Prepares the given HTTP URL.\"\"\"\n         #: Accept objects that have string representations.\n+        #: We're unable to blindy call unicode/str functions\n+        #: as this will include the bytestring indicator (b'')\n+        #: on python 3.x.\n+        #: https://github.com/kennethreitz/requests/pull/2238\n         try:\n-            url = unicode(url)\n-        except NameError:\n-            # We're on Python 3.\n-            url = str(url)\n-        except UnicodeDecodeError:\n-            pass\n+            url = url.decode('utf8')\n+        except AttributeError:\n+            url = unicode(url) if is_py2 else str(url)\n \n         # Don't do any URL preparation for non-HTTP schemes like `mailto`,\n         # `data` etc to work around exceptions from `url_parse`, which\n\n@@ -591,6 +591,12 @@ class RequestsTestCase(unittest.TestCase):\n         assert resp.json()['headers'][\n             'Dummy-Auth-Test'] == 'dummy-auth-test-ok'\n \n+    def test_prepare_request_with_bytestring_url(self):\n+        req = requests.Request('GET', b'https://httpbin.org/')\n+        s = requests.Session()\n+        prep = s.prepare_request(req)\n+        assert prep.url == \"https://httpbin.org/\"\n+\n     def test_links(self):\n         r = requests.Response()\n         r.headers = {\n\n\nQuestion: Does this commit introduce technical debt? Answer yes or no."}], "max_tokens": 1, "temperature": 0}}
